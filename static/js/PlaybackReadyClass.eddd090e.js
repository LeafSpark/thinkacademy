(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["PlaybackReadyClass"],{"0517":function(e,a){e.exports={functional:!0,render(e,a){const{_c:t,_v:o,data:n,children:r=[]}=a,{class:s,staticClass:i,style:c,staticStyle:l,attrs:d={},...u}=n;return t("svg",{class:[s,i],style:[c,l],attrs:Object.assign({width:"14",height:"14",xmlns:"http://www.w3.org/2000/svg"},d),...u},r.concat([t("path",{attrs:{d:"M10.84 3.44h0C9.967 1.247 7.542.2 5.422 1.101a4.225 4.225 0 00-2.262 2.34h0C1.76 3.781.771 5.08.778 6.57h0C.78 8.346 2.17 9.785 3.888 9.787h1.187c.23 0 .415-.192.415-.429a.422.422 0 00-.415-.429H3.89h0c-1.26-.001-2.28-1.057-2.282-2.36h0c-.005-1.163.814-2.155 1.925-2.331l.247-.04.08-.245h0c.595-1.793 2.483-2.75 4.217-2.135a3.378 3.378 0 012.064 2.135l.081.245.247.04h0c1.111.176 1.93 1.168 1.924 2.331h0c-.001 1.303-1.022 2.358-2.28 2.36H8.85h0a.422.422 0 00-.415.43c0 .236.186.428.415.428h1.261c1.718-.002 3.11-1.441 3.111-3.218h0c.007-1.49-.98-2.788-2.383-3.13h0zm-2.054 7.286l-1.371 1.161V6.141h0A.422.422 0 007 5.712a.422.422 0 00-.415.43v5.745l-1.384-1.172h0a.405.405 0 00-.585.035.44.44 0 00.06.629l2.062 1.746h0c.153.13.373.13.526 0l2.048-1.735h0a.44.44 0 00.071-.603.406.406 0 00-.597-.06h0z",fill:"#FF503F","fill-rule":"nonzero",stroke:"#FF503F","stroke-width":".5"}})]))}}},"0770":function(e,a,t){},"2af5":function(e,a,t){"use strict";t("0770")},6999:function(e,a,t){},7582:function(e,a,t){"use strict";t.r(a);var o=function(){var e=this,a=e._self._c;return a("div",{staticClass:"ready-class",attrs:{id:"ready-class","data-log":"回放准备页"}},[a("Toolbar"),a("ReadyClass")],1)},n=[],r=t("dfa8"),s=function(){var e=this,a=e._self._c;return a("div",{attrs:{"data-log":"回放课前准备页"}},[a("div",{staticClass:"playback-class-content-wrapper"},[a("Header",{attrs:{"back-url":e.backUrl}}),a("div",{staticClass:"playback-class-content"},[a("CoursewareDownloading",{staticClass:"content-item",attrs:{"back-url":e.backUrl},on:{completeDownload:e.completeDownload}})],1)],1)])},i=[],c=t("c7eb"),l=t("1da1"),d=t("5530"),u=(t("ac1f"),t("5319"),function(){var e=this,a=e._self._c;return a("div",{staticClass:"courseware-downloading"},[e.loading?[a("Loading",{attrs:{"margin-top":"300px"}})]:e.vodAddress?[a("div",{staticClass:"courseware-downloading-header"},[a("LottieEmoticon",{attrs:{lottieUrl:e.lottieUrl,width:140,height:130,loopLottie:!0}})],1),a("div",{staticClass:"courseware-downloading-status"},[a("a-progress",{attrs:{"stroke-color":{"0%":"#ffd518","100%":"#ffaa0a"},showInfo:!1,strokeLinecap:e.square,percent:e.percent}}),"exists"==e.state||"complete"==e.state?a("div",{staticClass:"tips"},[e._v(" "+e._s(e.$t("prepareClass.coursewareDownload"))+" ")]):"progress"==e.state||"start"==e.state?a("div",{staticClass:"tips"},[e._v(" "+e._s(e.downloadTip)+" ")]):a("div",{staticClass:"failed tips"},[a("p",{staticClass:"tip-desc"},[e._v(e._s(e.$t("prepareClass.coursewareDownloadWeekTitle")))]),a("a-button",{staticClass:"btn redown-btn",attrs:{type:"primary",shape:"round",size:"large",loading:e.loading},on:{click:e.reDownload}},[e._v(" "+e._s(e.$t("prepareClass.redownload"))+" ")])],1)],1)]:[a("div",{staticClass:"courseware-downloading-header"},[e.vodAddress?a("LottieEmoticon",{attrs:{lottieUrl:e.lottieUrl,width:140,height:130,loopLottie:!0}}):a("span",{staticClass:"no-address"})],1),a("div",{staticClass:"error-info"},[a("p",{staticClass:"error-desc"},[e._v(e._s(e.$t("prepareClass.playbackError")))]),a("a-button",{staticClass:"btn back-btn",attrs:{type:"primary",shape:"round",size:"large",loading:e.loading},on:{click:e.back}},[e._v(" "+e._s(e.$t("common.back"))+" ")])],1)]],2)}),f=[],p=(t("a15b"),t("d81d"),t("99af"),t("14d9"),t("0517")),w=t.n(p),h=t("24ba"),m=t.n(h),g=t("6e1f"),b=t.n(g),v=t("0d52"),I=t("a5bc"),C=t("d0db"),O=t("e39c"),j=t("bd12"),y=t("3aa1"),D=t("bc8a"),k=t("2b6b"),S=t("0dc5"),L=t("83ef"),x={props:{backUrl:{default:"",type:String}},data:function(){return{loading:!0,state:"start",baseZipUrl:"",baseZipMd5:"",IconDownloadSvg:w.a,IconFailed:m.a,IconSuccess:b.a,coursewareInfo:null,dataInfo:{},currentDownIndex:0,mainInfoUrl:"",metadataInfo:null,needDownloadFileCount:0,tempPath:"",percent:"0",receivedSize:"0M",coursewareReceivedSize:"0M",dataInfoReceivedSize:"0M",mainInfoReceivedSize:"0M",currentSpeed:0,coursewareSpeed:"0M/S",dataInfoSpeed:"0M/S",mainInfoSpeed:"0M/S",totalSize:"0M",coursewareTotalSize:"0M",dataInfoTotalSize:"0M",mainInfoTotalSize:"0M",commonCoursewareReceivedSize:"0M",commonCoursewareSpeed:"0KB/S",commonCoursewareTotalSize:"0M",lottieUrl:"./lottiefiles/readyClass/playBack_data.json",vodAddress:null,isOffline:!1,courseWarePackages:{},planId:null,coursewareSensorData:{exit:!1,size:0,startTime:(new Date).getTime(),endTime:(new Date).getTime(),courseEndTime:0}}},components:{LottieEmoticon:y["a"],Loading:j["a"]},computed:{speed:function(){return console.info("对象函数 speed,filePath:renderer/components/ReadyClass/DownloadList/index.vue"),this.currentSpeed+"M/S"},downloadTip:function(){var e=this;return console.info("对象函数 downloadTip,filePath:renderer/components/ReadyClass/DownloadList/index.vue"),this.$t("prepareClass.coursewareDownloading",{speed:this.speed,minutes:function(){try{var a=Object(O["n"])(e.coursewareReceivedSize)+Object(O["n"])(e.dataInfoReceivedSize)+Object(O["n"])(e.mainInfoReceivedSize)+Object(O["n"])(e.commonCoursewareReceivedSize),t=Object(O["n"])(e.coursewareTotalSize)+Object(O["n"])(e.dataInfoTotalSize)+Object(O["n"])(e.mainInfoTotalSize)+Object(O["n"])(e.commonCoursewareTotalSize);if(e.currentSpeed=Math.max(Object(O["p"])(e.coursewareSpeed),Object(O["p"])(e.dataInfoSpeed),Object(O["p"])(e.mainInfoSpeed),Object(O["p"])(e.commonCoursewareSpeed)),0!==t&&(e.percent=100*a/t),e.coursewareSensorData.size=1024*t,0==e.currentSpeed)return e.$t("prepareClass.coursewareDownloadingSlow");var o=Math.ceil((t-a)/e.currentSpeed);return o<60?o+e.$t("prepareClass.second"):o>=60?Math.floor(o/60)+e.$t("prepareClass.minute")+o%60+e.$t("prepareClass.second"):e.$t("prepareClass.coursewareDownloadingSlow")}catch(n){return console.error(e.$t("prepareClass.coursewareDownloadingSlow"),n),e.$t("prepareClass.coursewareDownloadingSlow")}}()})}},watch:{state:function(e){"complete"!==e&&"exists"!==e||!this.vodAddress||(this.coursewareSensorData.endTime=(new Date).getTime(),this.$emit("completeDownload",this.coursewareSensorData)),"fail"!=e||this.isOffline||this.sensorsTrack("fail")},currentDownIndex:function(e){e===this.needDownloadFileCount&&(this.state="complete",this.percent=100,this.sensorsTrack("success"))}},methods:{sensorsTrack:function(e){this.$sensors.track("coursewareDownload",{planId:this.planId,downloadResult:e,plan_mode:"回放"})},back:function(){console.info("对象函数 back,filePath:renderer/components/ReadyClass/DownloadList/index.vue"),this.$router.push({path:this.backUrl})},testOfflineStatus:function(){var e=this;return Object(l["a"])(Object(c["a"])().mark((function a(){return Object(c["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:console.info("对象函数 testOfflineStatus,filePath:renderer/components/ReadyClass/DownloadList/index.vue"),window.addEventListener("offline",(function(){console.info("箭头函数 监听 offline,filePath:renderer/components/ReadyClass/DownloadList/index.vue"),"complete"!==e.state&&"exists"!==e.state&&(e.state="fail"),e.isOffline=!0}));case 2:case"end":return a.stop()}}),a)})))()},testOnlineStatus:function(){var e=this;return Object(l["a"])(Object(c["a"])().mark((function a(){return Object(c["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:console.info("对象函数 testOnlineStatus,filePath:renderer/components/ReadyClass/DownloadList/index.vue"),window.addEventListener("online",(function(){console.info("箭头函数 监听 online,filePath:renderer/components/ReadyClass/DownloadList/index.vue"),e.isOffline=!1}));case 2:case"end":return a.stop()}}),a)})))()},reDownload:function(){var e=this;return Object(l["a"])(Object(c["a"])().mark((function a(){return Object(c["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:console.info("对象函数 reDownload,filePath:renderer/components/ReadyClass/DownloadList/index.vue"),e.currentDownIndex=0,e.currentSpeed=0,e.startDown();case 4:case"end":return a.stop()}}),a)})))()},getCommonCourseware:function(){var e=this;return Object(l["a"])(Object(c["a"])().mark((function a(){var t,o;return Object(c["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.info("对象函数 getCommonCourseware,filePath:renderer/components/ReadyClass/DownloadList/index.vue"),a.next=3,Object(D["e"])().catch((function(a){return console.info("箭头函数 initConfigApi的catch(error)",a,"filePath:renderer/components/ReadyClass/DownloadList/index.vue"),e.sendLogger("回放课前准备页-获取基础包地址失败",{error:a},"error"),a||{}}));case 3:if(t=a.sent,t&&0==t.code){a.next=8;break}return e.state="fail",e.sendLogger("回放课前准备页-获取基础包地址失败",{res:t},"error"),a.abrupt("return");case 8:o=t.data||{},e.courseWarePackages=o.courseWarePackages&&o.courseWarePackages.length?o.courseWarePackages[1]:{},console.log("预加载课件基础资源包数据: ",e.courseWarePackages),e.courseWarePackages.url&&(e.needDownloadFileCount+=1);case 12:case"end":return a.stop()}}),a)})))()},getDataInfo:function(){var e=this;return Object(l["a"])(Object(c["a"])().mark((function a(){var t,o,n,r,s;return Object(c["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.info("对象函数 getDataInfo,filePath:renderer/components/ReadyClass/DownloadList/index.vue"),a.prev=1,a.next=4,Object(I["c"])({planId:1*e.planId}).catch((function(a){return console.info("箭头函数 queryNewPlaybackInfo的catch(error)",a,"filePath:renderer/components/ReadyClass/DownloadList/index.vue"),e.sendLogger("回放课前准备页-获取数据地址失败",{error:a,planId:e.planId},"error"),console.error("回放获取数据失败",a),a||{}}));case 4:if(s=a.sent,0===s.code){a.next=9;break}return e.sendLogger("回放课前准备页-获取数据地址失败",{res:s,planId:e.planId},"error"),console.error("回放获取数据失败",s),a.abrupt("return");case 9:e.coursewareSensorData.courseEndTime=s.data.endTime,e.$store.dispatch("playback/setMetadataAvailable",s.data.metadataAvailable),Object(k["setTimeOffset"])(1e3*s.data.timestamp-(new Date).getTime()),e.$store.dispatch("common/setTimeOffset",s.data.timestamp),null!==(t=s.data)&&void 0!==t&&null!==(t=t.graffiti)&&void 0!==t&&t.url&&(e.dataInfo=s.data.graffiti,e.needDownloadFileCount+=1,e.dataInfoTotalSize=e.dataInfo.size+"B"),null!==(o=s.data)&&void 0!==o&&null!==(o=o.metadata)&&void 0!==o&&o.url&&(e.metadataInfo=s.data.metadata,e.mainInfoUrl=s.data.metadata.url,e.needDownloadFileCount+=1,e.mainInfoTotalSize=s.data.metadata.size+"B"),null!==(n=s.data)&&void 0!==n&&null!==(n=n.courseware)&&void 0!==n&&n.baseZipUrl&&(e.coursewareInfo=s.data.courseware,e.needDownloadFileCount+=1,e.coursewareTotalSize=e.coursewareInfo.baseZipSize+"B"),null!==(r=s.data)&&void 0!==r&&null!==(r=r.vodAddress)&&void 0!==r&&null!==(r=r.list)&&void 0!==r&&r.length&&(e.vodAddress=s.data.vodAddress),e.loading=!1,a.next=23;break;case 20:a.prev=20,a.t0=a["catch"](1),console.error("回放课前准备页-获取数据地址失败",{error:a.t0,planId:e.planId});case 23:case"end":return a.stop()}}),a,null,[[1,20]])})))()},downloadCourseware:function(){var e=this;if(console.info("对象函数 downloadCourseware,filePath:renderer/components/ReadyClass/DownloadList/index.vue"),this.sendLogger("回放课前准备页-课件下载",{coursewareInfo:this.coursewareInfo}),this.coursewareInfo){console.log("开始下载课件"),this.sendLogger("回放课前准备页-课件下载",{planId:this.planId,url:this.coursewareInfo.baseZipUrl,packageMd5:this.coursewareInfo.baseZipMd5,coursewareId:this.coursewareInfo.id,packageSize:this.coursewareInfo.baseZipSize});var a={planId:this.planId,url:this.coursewareInfo.baseZipUrl,packageMd5:this.coursewareInfo.baseZipMd5,coursewareId:this.coursewareInfo.id,packageSize:this.coursewareInfo.baseZipSize};v["downloaderApi"].downloadCourseware({fileURL:this.coursewareInfo.baseZipUrl,fileMD5:this.coursewareInfo.baseZipMd5,retry:2,timeout:1e4,start:function(a){console.log("预加载页面下载器开始启动",a),e.sendLogger("回放课前准备页-课件下载",Object(d["a"])(Object(d["a"])({},a),{},{url:e.coursewareInfo.baseZipUrl}))},progress:function(a){console.log(a),e.coursewareSpeed=a.speed.replace("NaN","0"),e.coursewareReceivedSize=a.receivedSize,e.coursewareTotalSize=a.totalSize,e.sendLogger("回放课前准备页-课件下载进度",Object(d["a"])(Object(d["a"])({},a),{},{url:e.coursewareInfo.baseZipUrl}))},complete:function(t){console.log("downloadCourseware下载完成",t),e.currentDownIndex++,console.log("downloadCourseware下载完成------",e.$sensors.track),e.$sensors.track("pc_courseware_download",Object(d["a"])(Object(d["a"])({},a),{},{statusDesc:"success",downloadPackageMd5:t.MD5||"",downloadCost:parseInt(t.uptime/1e3)})),e.sendLogger("回放课前准备页-课件下载完成",Object(d["a"])(Object(d["a"])({},t),{},{url:e.coursewareInfo.baseZipUrl}))},fail:function(t){console.log(t),e.state="fail",e.sendLogger("回放课前准备页-下载课件失败",Object(d["a"])(Object(d["a"])({},a),{},{error:t}),"error"),e.$sensors.track("pc_courseware_download",Object(d["a"])(Object(d["a"])({},a),{},{statusDesc:"fail",downloadCost:parseInt(t.uptime/1e3),downloadPackageMd5:t.MD5||""}))},exists:function(a){console.log("文件已经存在",a),e.coursewareSensorData.exit=!0,console.log(Object(O["k"])("userData")),e.currentDownIndex++,e.sendLogger("回放课前准备页-课件下载已存在",Object(d["a"])(Object(d["a"])({},a),{},{url:e.coursewareInfo.baseZipUrl}))},extract:function(a){console.log(a),e.sendLogger("回放课前准备页-课件下载解压回调",Object(d["a"])(Object(d["a"])({},a),{},{url:e.coursewareInfo.baseZipUrl}))}})}},downloadDataInfo:function(){var e=this;console.info("对象函数 downloadDataInfo,filePath:renderer/components/ReadyClass/DownloadList/index.vue"),this.dataInfo.url&&(console.log("开始下载dataInfo",this.dataInfo),this.sendLogger("回放课前准备页-涂鸦数据下载",{dataInfoUrl:this.dataInfo.url}),v["downloaderApi"].downloadFile({fileURL:this.dataInfo.url.split("?")[0],fileMD5:this.dataInfo.md5,savePath:"".concat(Object(O["k"])("userData"),"/playback"),start:function(a){console.log("预加载页面下载器开始启动",a),e.sendLogger("回放课前准备页-涂鸦数据开始下载",Object(d["a"])(Object(d["a"])({},a),{},{dataInfoUrl:e.dataInfo.url}))},progress:function(a){console.log("下载进度",a),e.dataInfoSpeed=a.speed.replace("NaN","0"),e.dataInfoReceivedSize=a.receivedSize,e.dataInfoTotalSize=a.totalSize,e.sendLogger("回放课前准备页-涂鸦数据进度",Object(d["a"])(Object(d["a"])({},a),{},{dataInfoUrl:e.dataInfo.url}))},complete:function(a){console.log("downloadFile下载涂鸦数据完成",a),e.sendLogger("回放课前准备页-涂鸦数据下载完成",Object(d["a"])(Object(d["a"])({},a),{},{dataInfoUrl:e.dataInfo.url})),e.currentDownIndex++;try{var t=a.filePath.split("/");t.pop();var o=t.join("/");console.log("path",o);var n=new S(a.filePath);n.extractAllTo(e.tempPath,!0);var r=L.readdirSync(e.tempPath);console.log(r),r.map((function(a){if(a.indexOf(".zip")>-1){var t=new S("".concat(e.tempPath).concat(a));t.extractAllTo("".concat(e.tempPath),!0)}}))}catch(s){console.error("回放课前准备页-涂鸦数据解压失败 ".concat(e.dataInfo.url),s)}},fail:function(a){console.log("下载失败",a),e.state="fail",e.sendLogger("回放课前准备页-下载涂鸦文件失败",{error:a,params:e.dataInfo},"error")},exists:function(a){console.log("文件已经存在",a),e.currentDownIndex++,e.sendLogger("回放课前准备页-涂鸦数据已经存在",Object(d["a"])(Object(d["a"])({},a),{},{dataInfoUrl:e.dataInfo.url}))},extract:function(a){console.log(a),e.sendLogger("回放课前准备页-涂鸦数据下载解压回调",Object(d["a"])(Object(d["a"])({},a),{},{dataInfoUrl:e.dataInfo.url}))}}))},downloadMainInfo:function(){var e=this;console.info("对象函数 downloadMainInfo,filePath:renderer/components/ReadyClass/DownloadList/index.vue"),this.$store.dispatch("playback/setMainFileName",""),this.mainInfoUrl?(console.log("开始下载mainInfo",this.mainInfoUrl),this.sendLogger("回放课前准备页-打点文件下载",{mainInfoUrl:this.mainInfoUrl}),v["downloaderApi"].downloadFile({fileURL:this.mainInfoUrl,fileMD5:this.metadataInfo.md5,savePath:this.tempPath,start:function(a){console.log("预加载页面下载器开始启动",a),e.sendLogger("回放课前准备页-打点文件开始下载",Object(d["a"])(Object(d["a"])({},a),{},{mainInfoUrl:e.mainInfoUrl}))},progress:function(a){console.log("下载进度",a),e.mainInfoSpeed=a.speed.replace("NaN","0"),e.mainInfoReceivedSize=a.receivedSize,e.mainInfoTotalSize=a.totalSize,e.sendLogger("回放课前准备页-打点文件下载进度",Object(d["a"])(Object(d["a"])({},a),{},{mainInfoUrl:e.mainInfoUrl}))},complete:function(a){console.log("downloadFile下载完成",a),e.currentDownIndex++,e.$store.dispatch("playback/setMainFileName",a.fileName),e.sendLogger("回放课前准备页-打点文件下载完成",Object(d["a"])(Object(d["a"])({},a),{},{mainInfoUrl:e.mainInfoUrl}))},fail:function(a){console.log("下载失败",a),e.state="fail",e.sendLogger("回放课前准备页-打点文件下载打点文件失败",{error:a,params:e.mainInfoUrl},"error")},exists:function(a){e.$store.dispatch("playback/setMainFileName",a.fileName),console.log("文件已经存在",a),e.sendLogger("回放课前准备页-打点文件已经存在",Object(d["a"])(Object(d["a"])({},a),{},{mainInfoUrl:e.mainInfoUrl})),e.currentDownIndex++}})):this.sendLogger("回放课前准备页-打点文件没有下载地址",{mainInfoUrl:this.mainInfoUrl})},downloadCommonCourseware:function(){var e=this;console.info("对象函数 downloadCommonCourseware,filePath:renderer/components/ReadyClass/DownloadList/index.vue"),console.log("下载基础课件包"),v["downloaderApi"].downloadCourseware({fileURL:this.courseWarePackages.url,fileMD5:this.courseWarePackages.zipMd5,retry:2,timeout:1e4,start:function(a){console.log("课件基础包下载开始:",a),e.sendLogger("回放课前准备页-课件基础包开始下载",Object(d["a"])(Object(d["a"])({},a),{},{params:e.courseWarePackages}))},progress:function(a){console.log("课件基础包下载进度:",a),e.commonCoursewareReceivedSize=a.receivedSize,e.commonCoursewareSpeed=a.speed.replace("NaN","0"),e.commonCoursewareTotalSize=a.totalSize},complete:function(a){console.log("课件基础包下载完成:",a),e.currentDownIndex++,e.sendLogger("回放课前准备页-课件基础包下载完成",Object(d["a"])(Object(d["a"])({},a),{},{params:e.courseWarePackages}))},fail:function(a){console.log("课件基础包下载失败:",a),e.state="fail",e.sendLogger("回放课前准备页-课件基础包下载失败",{error:a,params:e.courseWarePackages},"error")},exists:function(a){console.log("课件基础包已经存在:",a),e.currentDownIndex++,e.sendLogger("回放课前准备页-课件基础包已经存在",{res:a,params:e.courseWarePackages})}})},startDown:function(){console.info("对象函数 startDown,filePath:renderer/components/ReadyClass/DownloadList/index.vue"),this.state="progress",0!==this.needDownloadFileCount?(this.downloadCourseware(),this.downloadDataInfo(),this.downloadMainInfo(),this.downloadCommonCourseware()):this.state="complete"},sendLogger:function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info";C["a"].send({tag:"student.playback",content:Object(d["a"])(Object(d["a"])({},a),{},{msg:e}),level:t})}},mounted:function(){var e=this;this.planId=this.$route.query.planId,this.tempPath="".concat(Object(O["k"])("userData"),"/playback/").concat(this.planId,"/"),this.sendLogger("回放文件下载存放地址",{tempPath:this.tempPath}),console.log("下载地址",this.tempPath),this.$nextTick(Object(l["a"])(Object(c["a"])().mark((function a(){return Object(c["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.getDataInfo();case 2:return a.next=4,e.getCommonCourseware();case 4:e.startDown(),e.testOfflineStatus(),e.testOnlineStatus();case 7:case"end":return a.stop()}}),a)}))))}},_=x,A=(t("a0f2"),t("2877")),P=Object(A["a"])(_,u,f,!1,null,"077f7126",null),T=P.exports,U=t("e79d"),z=t("0a06a"),R={components:{Header:U["a"],CoursewareDownloading:T},data:function(){return{speedStandard:{},isCompleteDownload:!1,backUrl:this.$route.query.backUrl||"/courses"}},methods:{completeDownload:function(e){var a,t;console.info("对象函数 completeDownload(coursewareInfo)",e,"filePath:renderer/components/ReadyClass/PlayBackReadyClass.vue"),this.isCompleteDownload=!0,Object(k["setPlanId"])(null===(a=this.$route)||void 0===a?void 0:a.query,!0),z["e"](this.$route.query,e,null===(t=this.$store)||void 0===t||null===(t=t.state)||void 0===t||null===(t=t.common)||void 0===t?void 0:t.timeOffset),this.enterClass()},enterClass:function(){var e=this;console.info("对象函数 enterClass,filePath:renderer/components/ReadyClass/PlayBackReadyClass.vue"),this.$sensors.track("pc_ready_class_enter",{type:"playBack",isCompleteDownload:this.isCompleteDownload}),this.sendLogger("enterClass准备页进入回放页"),setTimeout((function(){e.$router.replace({path:"/playback/live",query:e.$route.query}),C["a"].send({tag:"userTrack",content:{msg:"回放准备页-自动进入回放"}})}),1e3)},sendLogger:function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info";C["a"].send({tag:"student.playback",content:Object(d["a"])(Object(d["a"])({},a),{},{msg:e}),level:t})}},mounted:function(){var e=this;return Object(l["a"])(Object(c["a"])().mark((function a(){return Object(c["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$store.dispatch("common/initCloudConfig");case 2:e.sendLogger("回放准备页mounted");case 3:case"end":return a.stop()}}),a)})))()},destroyed:function(){console.info("对象函数 destroyed,filePath:renderer/components/ReadyClass/PlayBackReadyClass.vue")}},M=R,$=(t("e41e"),Object(A["a"])(M,s,i,!1,null,"5b4d0dea",null)),B=$.exports,F={components:{Toolbar:r["a"],ReadyClass:B},data:function(){return{}},methods:{}},N=F,W=(t("2af5"),Object(A["a"])(N,o,n,!1,null,null,null));a["default"]=W.exports},a0f2:function(e,a,t){"use strict";t("6999")},a5bc:function(e,a,t){"use strict";t.d(a,"d",(function(){return l})),t.d(a,"c",(function(){return d})),t.d(a,"a",(function(){return u})),t.d(a,"b",(function(){return f}));var o=t("c7eb"),n=t("1da1"),r=t("dc21"),s=t("e39c");function i(e,a){return c.apply(this,arguments)}function c(){return c=Object(n["a"])(Object(o["a"])().mark((function e(a,t){var n,i,c;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Object(s["h"])(),i=n.oversea,e.next=3,Object(r["a"])({url:a,params:t,apiDomain:i});case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}var l=function(){var e=Object(n["a"])(Object(o["a"])().mark((function e(a){var t,n;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="/classroom-hub/playback/student/initEntry",e.next=3,i(t,a);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),d=function(){var e=Object(n["a"])(Object(o["a"])().mark((function e(a){var t,n;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="/api/hub/playback/info",e.next=3,i(t,a);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),u=function(){var e=Object(n["a"])(Object(o["a"])().mark((function e(a){var t,n;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="/classroom-hub/playback/student/getRoomHistoryMessage",e.next=3,i(t,a);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),f=function(){var e=Object(n["a"])(Object(o["a"])().mark((function e(a){var t,n;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="/api/playback/feedback",e.next=3,i(t,a);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},bd12:function(e,a,t){"use strict";var o=function(){var e=this,a=e._self._c;return e.show?a("div",{staticClass:"loading-wrapper",class:e.className,style:e.loadingStyle},[e._m(0)]):e._e()},n=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"loading-contenter"},[a("div",{staticClass:"loading-logo"},[a("img",{attrs:{src:t("c63e")}})]),a("div",{staticClass:"loading-animation"})])}],r={name:"Loading",props:{show:{default:!0,type:Boolean},size:{default:"default",type:String,validator:function(e){return console.info("对象函数 validator(value)",e,"filePath:renderer/components/Common/Loading.vue"),-1!==["small","default"].indexOf(e)}},marginTop:{default:"0",type:String},marginBottom:{default:"0",type:String}},computed:{className:function(){return console.info("对象函数 className,filePath:renderer/components/Common/Loading.vue"),"loading-".concat(this.size)},loadingStyle:function(){return console.info("对象函数 loadingStyle,filePath:renderer/components/Common/Loading.vue"),{marginTop:this.marginTop,marginBottom:this.marginBottom}}}},s=r,i=(t("f761"),t("2877")),c=Object(i["a"])(s,o,n,!1,null,"92d727e8",null);a["a"]=c.exports},c63e:function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAA8UExURUdwTP/DL//DLv/BL//DLv/EL//DL//DLv/DL//CLv/DL//DL//CLf/DL//DL//DL//DLv/DL//DMv/DMGSQIxsAAAATdFJOUwDwcSTeYM1AwICojww0SLNSmhsrwQ8LAAABI0lEQVRYw+3X2a6DIBCAYbaBYXXh/d/1aE3UxtbjMhdtOv+l6BeiiYAQ5+tzLwhK2oGKjTW1Vn/HyQV8NzlzF8HRkfVV10BX38Ygg18FptICKB+70OAWDD4GNPIMaJentyAuv4l8FKx7IIjYdB7a3CdBArplWFoMUYHTiQhcZdDTgqt3yyCDdgTlkBmy1iLeBIcJ7Q6fB2txzpGCYwz+HuhWAR4BcR98LhwAU6vGlXIDaruZexBwAJy35dN2WtadNX++iESbiK8BDRYyULWXT0AvwTsxyCCDnwJaUhAjaCrQBFWSuNsESoytFiRpYzqVxc/kh0Mipaemj2tDHE62iWKCh7daDDLI4CeDhRoUPXSWFHysASpIUnAsK6QFp+Pjf3f8AVRMjNs7xw9TAAAAAElFTkSuQmCC"},cac3:function(e,a,t){},e417:function(e,a,t){"use strict";t.d(a,"f",(function(){return f})),t.d(a,"e",(function(){return p})),t.d(a,"d",(function(){return w})),t.d(a,"c",(function(){return h})),t.d(a,"a",(function(){return m})),t.d(a,"b",(function(){return g}));var o=t("bee2"),n=t("d4ec"),r=t("ade3"),s=t("5530"),i=(t("cca6"),t("99af"),t("8bbf")),c=t.n(i),l=null,d=!0,u=0,f={0:"大班",1:"伪小班",2:"小班"},p=function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};c.a.prototype.$sensors.track(e,Object(s["a"])({lesson_type:f[a.classType],class_id:a.classId,plan_id:a.planId},t))},w=function(e,a){c.a.prototype.$sensors.track(e,a)},h=function(e){var a=e.type,t=void 0===a?"link":a,o=e.result,n=e.errorType,r=void 0===n?"":n,s=e.code,i=void 0===s?0:s,f=e.msg,p=void 0===f?"无":f,w=e.liveInfo,h=void 0===w?{}:w,m=e.msgInfo,g=void 0===m?{}:m,b={};"message"==t?(b={result:o,irc_message_type:p},"fail"==o&&Object.assign(b,{error_type:r,msg_info:JSON.stringify(g),error_msg:"错误码=".concat(i,"，错误描述=").concat(p,"失败")}),c.a.prototype.$sensors.track("hw_irc_send_message",b)):(b={result:o,re_connect_num:u,is_first:d?"是":"否",location:h.location},"fail"==o?(Object.assign(b,{live_info:JSON.stringify(h),error_type:r,error_msg:"错误码=".concat(i,"，错误描述=").concat(p)}),d=!1,u+=1):"success"==o?(Object.assign(b,{irc_join_room_duration:Date.now()-l}),d=!1,u+=1):"start"==o&&(l=Date.now()),c.a.prototype.$sensors.track("hw_irc_join_room",b))},m=Object(o["a"])((function e(){var a=this;Object(n["a"])(this,e),Object(r["a"])(this,"rtcSensorPush",(function(e){var t=e.result,o=e.errorType,n=void 0===o?"":o,r=e.code,s=void 0===r?0:r,i=e.msg,l=void 0===i?"无":i,d={result:t,is_first:a.isFirstJoinChannel?"是":"否"};"fail"==t?Object.assign(d,{error_type:n,error_msg:"错误码=".concat(s,"，错误描述=").concat(l)}):"success"==t?Object.assign(d,{rtc_join_room_duration:Date.now()-a.joinRtcStartTime}):"start"==t&&(a.joinRtcStartTime=Date.now()),c.a.prototype.$sensors.track("hw_rtc_join_room",d)})),this.joinRtcStartTime=null,this.isFirstJoinChannel=!0})),g=function(e){var a="";if(e.isParent)a="家长旁听";else{var t={FORMAL:"正式课",PLAYBACK:"回放",AUDITION:"旁听课",TEMPORARY:"临时课"};a=t[e.lessonType]}c.a.prototype.$sensors.track("hw_stu_enter_class_room",{package_id:e.packageId,class_id:e.classId,previous_source:"course"==e.from?"学习中心一级页":"学习中心二级页",plan_id:e.planId,plan_mode:0==e.isPlayBack?"直播":"回放",lesson_type:f[e.classType],course_type:a}),0==e.isPlayBack&&c.a.prototype.$sensors.track("pc_enter_class_room",{previous_source:"course"==e.from?"学习中心一级页":"学习中心二级页",course_type:a,is_start_class:!e.isPlayBack&&e.isStartClass})}},e41e:function(e,a,t){"use strict";t("cac3")},ebc2:function(e,a,t){},f761:function(e,a,t){"use strict";t("ebc2")}}]);
//# sourceMappingURL=PlaybackReadyClass.eddd090e.js.map