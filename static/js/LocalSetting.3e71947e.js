(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["LocalSetting"],{"2ba0":function(e,t,n){"use strict";n("d77e")},"3ed8":function(e,t,n){"use strict";n("aa44")},"40f6":function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return h}));var a=n("c7eb"),c=n("1da1"),o=(n("caad"),n("2532"),n("02fc")),i=n("bc8a"),s=n("35ac"),r=n("d0db"),l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"error";r["a"].send({tag:"http",level:a,content:{msg:e,err:t,params:n}})},u=function(){var e=Object(c["a"])(Object(a["a"])().mark((function e(){var t,n=arguments;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"school",e.next=3,window.thinkApi.ipc.invoke("setStoreValue","timezoneRuleType",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(c["a"])(Object(a["a"])().mark((function e(){var t;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,window.thinkApi.ipc.invoke("getStoreValue","timezoneRuleType");case 2:return t=e.sent,e.abrupt("return",t||"school");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(c["a"])(Object(a["a"])().mark((function e(){var t,n,c,r,h,f,p,m,b,v,w,O,g;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["b"])();case 2:return t=e.sent,e.next=5,Object(o["f"])();case 5:return n=e.sent,e.next=8,d();case 8:if(c=e.sent,r=(null===t||void 0===t?void 0:t.timeZoneSwitchSchool)||[],h=r.includes(n),console.log("####hasAuth",h,c),!h){e.next=22;break}return"manual"!==c&&(c="geo"),e.next=16,Object(i["h"])().catch((function(e){l("接口报错:时区列表:",e)}));case 16:f=e.sent,p=f.code,m=f.data,0===p&&Object(o["k"])(m),e.next=25;break;case 22:c="school",window.thinkApi.ipc.send("deleteStoreValue","timezoneList"),window.thinkApi.ipc.send("deleteStoreValue","timezone");case 25:return u(c),console.log("####timezoneRuleType",c),e.next=29,Object(o["c"])();case 29:if(b=e.sent,v=null===t||void 0===t?void 0:t.timezone[b],w=[],"geo"!==c){e.next=39;break}return O=Object(o["b"])(),console.log("####deviceTimeZone",O),e.next=37,Object(i["a"])({timezone:O});case 37:g=e.sent,g&&0===g.code&&g.data&&(0===g.data.invalid?v=O:w=["setting.timezone.invalidMsg",v]);case 39:return"manual"!==c&&Object(o["j"])(v),e.abrupt("return",w.length?w:"");case 41:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},"4a82":function(e,t,n){"use strict";n("7c49")},"61ea":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-local-setting"},[t("Toolbar",{attrs:{transparent:!0,fixed:!0,disabledMaximize:!0}}),t("div",{staticClass:"wrapper"},[t("div",{staticClass:"title"},[e._v(e._s(e.chooseTitle))]),t("div",{staticClass:"description"},[e._v(" "+e._s(e.chooseDesc)+" ")]),t("div",{staticClass:"choose-items"},[e._l(e.localList,(function(n,a){return[n.schoolForCustomerEnabled?t("div",{key:a,staticClass:"item",class:[{active:n.schoolSimplifyName===e.local}],on:{click:function(t){return e.handleItem(n)}}},[t("div",{staticClass:"item-name"},[t("div",{staticClass:"country-flag"},[t("img",{attrs:{src:n.schoolIconUrl}})]),t("div",{staticClass:"country-name"},[e._v(" "+e._s(n.schoolName)+" ")])])]):e._e()]}))],2)]),t("div",{staticClass:"choose-button"},[t("div",{staticClass:"button",class:[{disabled:!e.localCode}],on:{click:e.handleOk}})])],1)},c=[],o=n("c7eb"),i=n("1da1"),s=(n("14d9"),n("dfa8")),r=n("02fc"),l=n("bc13"),u=n("40f6"),d=n("35ac"),h=n("d19c"),f=n("3898"),p=n("2b6b"),m={name:"LocalSetting",components:{Toolbar:s["a"]},data:function(){return{localList:Object(d["c"])("campusConfig")||[],local:"",localCode:"",chooseTitle:"Choose an education system",chooseDesc:"Please choose the education system that you want your child to follow."}},created:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("common/getCampusList");case 2:e.localList=Object(d["c"])("campusConfig")||[];case 3:case"end":return t.stop()}}),t)})))()},methods:{handleItem:function(e){console.info("对象函数 handleItem(item)",e,"filePath:renderer/views/LocalSetting.vue");var t=e.schoolSimplifyName,n=e.schoolISOStandardlanguageCode;"hk"==t?(this.chooseTitle="選擇教育體系",this.chooseDesc="選擇適合您孩子的教育體系，為您推薦相應課程"):"tmc"==t?(this.chooseTitle="选择教育体系",this.chooseDesc="选择适合您孩子的教育体系，为您推荐相应课程"):(this.chooseTitle="Choose an education system",this.chooseDesc="Please choose the education system that you want your child to follow."),this.local=t,this.localCode=t,Object(h["c"])(n),Object(f["c"])()},handleOk:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var n;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.info("对象函数 handleOk,filePath:renderer/views/LocalSetting.vue"),e.local){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,Object(r["i"])(e.local);case 5:return t.t0=p["setSchoolCode"],t.next=8,Object(r["f"])();case 8:return t.t1=t.sent,(0,t.t0)(t.t1),t.next=12,Object(l["c"])();case 12:return t.next=14,Object(u["b"])();case 14:n=t.sent,n&&e.$Message.info(e.$t(n[0])+n[1]),e.$router.push("/login");case 17:case"end":return t.stop()}}),t)})))()}}},b=m,v=(n("2ba0"),n("2877")),w=Object(v["a"])(b,a,c,!1,null,"20159cfc",null);t["default"]=w.exports},"7c49":function(e,t,n){},"857a":function(e,t,n){"use strict";var a=n("e330"),c=n("1d80"),o=n("577e"),i=/"/g,s=a("".replace);e.exports=function(e,t,n,a){var r=o(c(e)),l="<"+t;return""!==n&&(l+=" "+n+'="'+s(o(a),i,"&quot;")+'"'),l+">"+r+"</"+t+">"}},aa44:function(e,t,n){},af03:function(e,t,n){"use strict";var a=n("d039");e.exports=function(e){return a((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},bc13:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return s}));var a=n("c7eb"),c=n("1da1"),o=function(){var e=Object(c["a"])(Object(a["a"])().mark((function e(){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,window.thinkApi.ipc.invoke("setStoreValue","campusRuleType","geo");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(c["a"])(Object(a["a"])().mark((function e(){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,window.thinkApi.ipc.invoke("setStoreValue","campusRuleType","manual");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(c["a"])(Object(a["a"])().mark((function e(){var t;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,window.thinkApi.ipc.invoke("getStoreValue","campusRuleType");case 2:return t=e.sent,e.abrupt("return",t||"manual");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},c7cd:function(e,t,n){"use strict";var a=n("23e7"),c=n("857a"),o=n("af03");a({target:"String",proto:!0,forced:o("fixed")},{fixed:function(){return c(this,"tt","","")}})},d77e:function(e,t,n){},dfa8:function(e,t,n){"use strict";n("c7cd");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"toolbar",class:[{transparent:e.transparent,fixed:e.fixed,"white-button":e.whiteButton,"theme-dark":e.darkTheme}],attrs:{"data-log":"原生菜单栏"}},[t("div",{staticClass:"drag-bar",attrs:{"data-log":"drag-bar"}}),t("WindowsActionBar")],1)},c=[],o=function(){var e=this,t=e._self._c;return"win"===e.platform?t("div",{staticClass:"windows-action-bar",attrs:{"data-log":"window菜单栏"}},[t("div",{staticClass:"item",attrs:{"data-log":"最小化"},on:{click:e.handleMinimizeWindow}},[t("span",{staticClass:"icon icon-minimize"})]),t("div",{staticClass:"item",attrs:{"data-log":"关闭"},on:{click:e.handleCloseWindow}},[t("span",{staticClass:"icon icon-close"})])]):e._e()},i=[],s=n("0d52"),r=n("e39c"),l={name:"WindowsActionBar",data:function(){return{platform:Object(r["l"])()}},methods:{handleMinimizeWindow:function(){console.info("对象函数 handleMinimizeWindow,filePath:renderer/components/Common/windowsActionBar.vue"),s["nativeApi"].minimizeWindow()},handleCloseWindow:function(){console.info("对象函数 handleCloseWindow,filePath:renderer/components/Common/windowsActionBar.vue"),localStorage.removeItem("largeClassTestCoverage"),localStorage.removeItem("smallClassTestCoverage"),s["nativeApi"].closeWindow(!0)}}},u=l,d=(n("4a82"),n("2877")),h=Object(d["a"])(u,o,i,!1,null,"55cdfd22",null),f=h.exports,p={name:"Toolbar",components:{WindowsActionBar:f},props:{transparent:{default:!1,type:Boolean},fixed:{default:!1,type:Boolean},whiteButton:{default:!1,type:Boolean},disabledMaximize:{default:!1,type:Boolean},darkTheme:{default:!1,type:Boolean}}},m=p,b=(n("3ed8"),Object(d["a"])(m,a,c,!1,null,"3bd2c296",null));t["a"]=b.exports}}]);
//# sourceMappingURL=LocalSetting.3e71947e.js.map