(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Home~PlaybackLive"],{"2f5c":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};window.$sensors.track(e,t)}},"498a2":function(e,t,n){"use strict";var r=n("23e7"),a=n("58a8").trim,c=n("c8d2");r({target:"String",proto:!0,forced:c("trim")},{trim:function(){return a(this)}})},"4bde":function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u}));var r=n("c7eb"),a=n("1da1"),c=n("0d52"),o=function(){var e=Object(a["a"])(Object(r["a"])().mark((function e(t){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,window.thinkApi.ipc.invoke("setStoreValue","screenshotPath",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(a["a"])(Object(r["a"])().mark((function e(){var t;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["nativeApi"].getPathByName("userData");case 2:return t=e.sent,e.abrupt("return",t+"/Logs");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(a["a"])(Object(r["a"])().mark((function e(){var t,n,a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["nativeApi"].getPathByName("desktop");case 2:return t=e.sent,n="".concat(t,"/Think-Academy-Screenshot"),e.next=6,window.thinkApi.ipc.invoke("getStoreValue","screenshotPath");case 6:return a=e.sent,e.abrupt("return",a||n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},"5e24":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("c7eb"),a=n("1da1"),c=n("dc21"),o=n("e39c"),s=function(){var e=Object(a["a"])(Object(r["a"])().mark((function e(t,n,a){var s,u,i;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=Object(o["h"])(),u=s.oversea,e.next=3,Object(c["a"])({url:n,params:a,apiDomain:u});case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function u(e,t){var n="/api/hub/classroom/student/preClassPrepare";return s(e,n,t)}},c58d:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return o}));var r=n("c7eb"),a=n("1da1"),c=(n("a9e3"),function(){var e=Object(a["a"])(Object(r["a"])().mark((function e(t){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return window.localStorage.setItem("canvasScale",t),e.next=3,window.thinkApi.ipc.invoke("setStoreValue","canvasScale",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),o=function(){var e=Object(a["a"])(Object(r["a"])().mark((function e(){var t,n;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,window.thinkApi.ipc.invoke("getStoreValue","canvasScale");case 2:return t=e.sent,n=window.localStorage.getItem("canvasScale")||t||2,e.abrupt("return",Number(n));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},c5ee:function(e,t,n){"use strict";n.d(t,"g",(function(){return k})),n.d(t,"e",(function(){return m})),n.d(t,"f",(function(){return g})),n.d(t,"a",(function(){return x})),n.d(t,"c",(function(){return y})),n.d(t,"b",(function(){return M})),n.d(t,"d",(function(){return P}));var r=n("c7eb"),a=n("5530"),c=n("1da1"),o=(n("14d9"),n("d3b7"),n("159b"),n("caad"),n("2532"),n("99af"),n("ac1f"),n("841c"),n("0d52")),s=n("ceab"),u=n("bc8a"),i=n("e39c"),p=n("d0db"),d=n("8bbf"),l=n.n(d),b=n("9b0f"),f=n("35ac"),w=n("9c59"),h=n.n(w),O=n("5e24"),j=n("9ca9"),v=void 0,k={FORMAL:"正式课",PLAYBACK:"回放",AUDITION:"旁听课",TEMPORARY:"临时课"},m=function(){var e=Object(c["a"])(Object(r["a"])().mark((function e(){var t,n,u,i,d;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["c"])();case 2:if(t=e.sent,t&&0==t.code){e.next=5;break}return e.abrupt("return");case 5:return n=t.data||{},u=n.list||[],e.next=9,o["nativeApi"].getPathByName("userData");case 9:if(i=e.sent,d=[],console.log("课件缓存目录: ",i),u.length){e.next=14;break}return e.abrupt("return");case 14:u.forEach(function(){var e=Object(c["a"])(Object(r["a"])().mark((function e(t){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:Object(s["a"])({planId:t.planId}).then(function(){var e=Object(c["a"])(Object(r["a"])().mark((function e(n){var s,u;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n&&0==n.code){e.next=2;break}return e.abrupt("return");case 2:s=n.data||{},u=s.list||[],u.forEach(function(){var e=Object(c["a"])(Object(r["a"])().mark((function e(n){var c,s;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("16"!=n.id){e.next=6;break}if(c=n.detail||{},console.log("查询课件预下载数据: ",c),c.baseZipUrl){e.next=5;break}return e.abrupt("return");case 5:d.includes(c.catalog)||(d.push(c.catalog),s={planId:t.planId,coursewareId:c.id,url:c.baseZipUrl,packageSize:c.baseZipSize,packageMd5:c.baseZipMd5},o["downloaderApi"].downloadCourseware({timeout:2e3,fileURL:c.baseZipUrl,fileMD5:c.baseZipMd5,start:function(e){console.log("课件下载开始:",e)},progress:function(e){console.log("课件下载进度:",e)},complete:function(e){console.log("downloadCourseware课件下载完成:",e),p["a"].send({tag:"coursewareDownload",content:Object(a["a"])(Object(a["a"])({},s),{},{downloadCost:parseInt(e.uptime/1e3),downloadPackageMd5:e.MD5,isSuccess:1})}),l.a.prototype.$sensors.track("pc_courseware_download",Object(a["a"])(Object(a["a"])({},s),{},{statusDesc:"success",downloadCost:parseInt(e.uptime/1e3),downloadPackageMd5:e.MD5||""}))},fail:function(e){console.log("课件下载失败:",e),p["a"].send({tag:"coursewareDownload",content:Object(a["a"])(Object(a["a"])({},s),{},{downloadCost:parseInt(e.uptime/1e3),downloadPackageMd5:e.MD5||"",isSuccess:0})}),l.a.prototype.$sensors.track("pc_courseware_download",Object(a["a"])(Object(a["a"])({},s),{},{statusDesc:"fail",downloadCost:parseInt(e.uptime/1e3),downloadPackageMd5:e.MD5||""}))},exists:function(e){console.log("课件已经存在:",e)}}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(c["a"])(Object(r["a"])().mark((function e(){var t,n,c,s;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["b"])();case 2:if(t=e.sent,t){e.next=10;break}return e.next=6,Object(u["e"])();case 6:if(n=e.sent,n&&0==n.code){e.next=9;break}return e.abrupt("return");case 9:t=n.data||{};case 10:return c=t.courseWarePackages&&t.courseWarePackages.length?t.courseWarePackages[1]:{},console.log("预加载课件基础资源包数据: ",c),e.next=14,window.thinkApi.ipc.invoke("setStoreValue","courseWarePackages",{url:c.url,zipMd5:c.zipMd5});case 14:s={url:c.url,packageSize:c.zipSize,packageMd5:c.zipMd5},o["downloaderApi"].downloadCourseware({fileURL:c.url,fileMD5:c.zipMd5,start:function(e){console.log("课件基础包下载开始:",e)},progress:function(e){console.log("课件基础包下载进度:",e)},complete:function(e){console.log("downloadCourseware课件基础包下载完成:",e),p["a"].send({tag:"coursewarePackagesDownload",content:Object(a["a"])(Object(a["a"])({},s),{},{downloadCost:parseInt(e.uptime/1e3),downloadPackageMd5:e.MD5,isSuccess:1})}),l.a.prototype.$sensors.track("pcrseware_download",Object(a["a"])(Object(a["a"])({},s),{},{status:"success",downloadCost:parseInt(e.uptime/1e3),downloadPackageMd5:e.MD5||""}))},fail:function(e){console.log("课件基础包下载失败:",e),p["a"].send({tag:"coursewarePackagesDownload",content:Object(a["a"])(Object(a["a"])({},s),{},{downloadCost:parseInt(e.uptime/1e3),downloadPackageMd5:e.MD5||"",isSuccess:0})}),l.a.prototype.$sensors.track("pc_courseware_download",Object(a["a"])(Object(a["a"])({},s),{},{statusDesc:"fail",downloadCost:parseInt(e.uptime/1e3),downloadPackageMd5:e.MD5||""}))},exists:function(e){console.log("课件基础包已经存在:",e)}});case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(c["a"])(Object(r["a"])().mark((function e(t,n,a){var c,s,u,p,d,b,f,w,h;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["nativeApi"].getPathByName("userData");case 2:return c=e.sent,s="".concat(c,"/courseware"),console.log("检查本地课件是否合法 coursewarePath",s),e.next=7,window.thinkApi.ipc.invoke("getStoreValue","courseWarePackages");case 7:if(u=e.sent,p=u.url,d=u.zipMd5,!p||!d){e.next=24;break}return b=Object(i["i"])(p),f=Object(i["i"])(t),e.next=15,o["downloaderApi"].checkCourseware(b,d,"".concat(s,"/").concat(a));case 15:return w=e.sent,e.next=18,o["downloaderApi"].checkCourseware(f,n,"".concat(s,"/").concat(a));case 18:if(h=e.sent,l.a.prototype.$sensors.track("pc_courseware_address_source",{type:"课件基础资源",source:w?"local":"online"}),l.a.prototype.$sensors.track("pc_courseware_address_source",{type:"课件资源",source:h?"local":"online"}),console.log("检查本地课件是否合法",h&&w,"检查课件基础资源是否合法:",w,"检查课件资源是否合法",w),!h||!w){e.next=24;break}return e.abrupt("return",!0);case 24:return e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),y=function(){var e=Object(c["a"])(Object(r["a"])().mark((function e(){var t,n;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["nativeApi"].getPathByName("userData");case 2:if(t=e.sent,n="".concat(t,"/courseware"),console.log("删除课件",!Object(b["existsSync"])(n)),Object(b["existsSync"])(n)){e.next=8;break}return p["a"].send({tag:"deleteCourseware",content:{msg:"courseware文件夹不存在"}}),e.abrupt("return");case 8:Object(i["g"])(n,7);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(e,t,n,r){var a=h.a.parse(window.location.search),c=a.coursewareId||"",o=a.backUrl;if("classmode"===e&&(t.action&&"onclass"===t.action||t.classmode&&"onclass"===t.classmode)){var s=a.planId,u=a.classId;Object(O["a"])(v,{planId:1*s,classId:1*u}).then((function(e){if(0===e.code&&e.data){var t=e.data.courseware,a=void 0===t?{}:t;a.id&&c!==a.id&&(n&&r?P(n,r,o):l.a.prototype.$bus.$emit("openExitByCoursewareChange",o))}})).catch((function(){p["a"].send({tag:"http",content:{msg:"课中获取课件接口报错, 导致无法校验"}})}))}},P=function(e,t,n){l.a.prototype.$Modal.info({class:"modal-simple apu-header",content:e,okText:t,width:Object(i["x"])(416),centered:!0,closable:!1,zIndex:3e3,onOk:function(){l.a.prototype.$bus.$emit("liveQuit"),p["a"].send({tag:"student.Quit",content:{msg:"学生因教师端课件变更退出课堂"}}),setTimeout((function(){Object(j["a"])("/#"+n)}),1e3)}})}},c8d2:function(e,t,n){"use strict";var r=n("5e77").PROPER,a=n("d039"),c=n("5899"),o="​᠎";e.exports=function(e){return a((function(){return!!c[e]()||o[e]()!==o||r&&c[e].name!==e}))}},ceab:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return i})),n.d(t,"f",(function(){return p})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return l})),n.d(t,"e",(function(){return b}));var r=n("c7eb"),a=n("1da1"),c=n("dc21"),o=n("e39c"),s=function(){var e=Object(a["a"])(Object(r["a"])().mark((function e(t,n){var a,s,u;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Object(o["h"])(),s=a.oversea,e.next=3,Object(c["a"])({url:t,params:n,apiDomain:s});case 3:return u=e.sent,e.abrupt("return",u);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),u=function(){var e=Object(a["a"])(Object(r["a"])().mark((function e(t){var n,a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="/classroom-hub/classroom/courseware",e.next=3,s(n,{planId:t});case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(a["a"])(Object(r["a"])().mark((function e(t){var n,a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="/classroom-hub/question/student/status",e.next=3,s(n,t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(a["a"])(Object(r["a"])().mark((function e(t){var n,a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="/classroom-hub/question/student/submit",e.next=3,s(n,t);case 3:return a=e.sent,console.log(a,"submitUserAnswer"),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(a["a"])(Object(r["a"])().mark((function e(){var t,n;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="/classroom-hub/timetable/student/prestrainList",e.next=3,s(t,{});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(a["a"])(Object(r["a"])().mark((function e(t){var n,a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="/classroom-hub/classroom/courseware",e.next=3,s(n,t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(a["a"])(Object(r["a"])().mark((function e(t){var n;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="/classroom-hub/classroom/student/interact/partakereport",e.next=3,s(n,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=Home~PlaybackLive.ab1ebff8.js.map