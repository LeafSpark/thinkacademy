(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ReadyClass"],{"01dc8":function(e,t,a){"use strict";a("71b8")},"0e16":function(e,t,a){"use strict";a("fc09")},"0f48":function(e,t,a){},1710:function(e,t,a){"use strict";a("a028")},"2ec5":function(e,t,a){},"340d":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:e.width,maskClosable:!1,centered:!0,keyboard:!1,closable:!1,footer:null,dialogClass:e.classes,destroyOnClose:e.destroyOnClose,zIndex:e.zIndex},model:{value:e.isShowModal,callback:function(t){e.isShowModal=t},expression:"isShowModal"}},[t("div",{staticClass:"common-model-wrapper"},[t("div",{staticClass:"top-wrapper"},[t("div",{staticClass:"title"},[e._v(e._s(e.title))]),t("div",{staticClass:"sub-title"},[e._v(e._s(e.subTitle))])]),e.$slots.default?t("div",{staticClass:"content-wrapper"},[e._t("default")],2):e._e(),e.showFooter?t("div",{staticClass:"bottom-wrapper"},[e.showLeftBtn?t("a-button",{staticClass:"btn left-btn",attrs:{type:"primary",shape:"round",size:"large",loading:e.leftLoading},on:{click:function(t){return e.leftOperation()}}},[e._v(" "+e._s(e.leftBtnText)+" ")]):e._e(),e.showRightBtn?t("a-button",{staticClass:"btn right-btn",attrs:{type:"primary",shape:"round",size:"large",disabled:e.disabled,loading:e.rightLoading},on:{click:function(t){return e.rightOperation()}}},[e._v(" "+e._s(e.rightBtnText)+" ")]):e._e()],1):e._e()])])},n=[],o=(a("a9e3"),a("a15b"),{props:{width:{type:Number,default:343},title:{type:String,default:""},isShowModal:{type:Boolean,default:!1},subTitle:{type:String,default:""},leftBtnText:{type:String,default:""},rightBtnText:{type:String,default:""},showLeftBtn:{type:Boolean,default:!0},showRightBtn:{type:Boolean,default:!0},dialogClass:{type:String||Array,default:""},showFooter:{type:Boolean,default:!0},destroyOnClose:{type:Boolean,default:!1},zIndex:{type:Number,default:1e3},disabled:{type:Boolean,default:!1},leftLoading:{type:Boolean,default:!1},rightLoading:{type:Boolean,default:!1}},computed:{classes:function(){var e=this.dialogClass;return Array.isArray(this.dialogClass)&&(e=this.dialogClass.join(" ")),"common-model-cls ".concat(e)}},methods:{leftOperation:function(){this.$emit("leftBtnOperation")},rightOperation:function(){this.$emit("rightBtnOperation")}}}),r=o,i=(a("b9da"),a("2877")),c=Object(i["a"])(r,s,n,!1,null,null,null);t["a"]=c.exports},"374d":function(e,t,a){},4186:function(e,t,a){"use strict";a("a202")},"498a2":function(e,t,a){"use strict";var s=a("23e7"),n=a("58a8").trim,o=a("c8d2");s({target:"String",proto:!0,forced:o("trim")},{trim:function(){return n(this)}})},5792:function(e,t,a){"use strict";a("e3c6")},"5af0":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ready-class",attrs:{id:"ready-class"}},[t("Toolbar"),t("ReadyClass",{attrs:{playback:e.isPlayBack}})],1)},n=[],o=a("c7eb"),r=a("1da1"),i=a("dfa8"),c=function(){var e=this,t=e._self._c;return t("div",{attrs:{"data-log":"课前准备页"}},[e.isError?[t("ErrorStatus",{attrs:{showBack:!0,backUrl:e.backUrl,scene:e.playback?"PlaybackReadyClass":"LivingReadyClass"},on:{"click-refresh":e.handleRefresh}})]:e.isLoading?[e.isLoading?t("Loading",{attrs:{"margin-top":"300px"}}):e._e()]:[t("div",{staticClass:"ready-class-content-wrapper"},[t("Header",{attrs:{"back-url":e.backUrl,showSignIn:e.showSignIn,signStatus:e.sign.status,startTime:e.startTime,rightCoin:e.sign.rightCoin}}),t("div",{staticClass:"ready-class-content"},[t("AudioTest",{staticClass:"content-item",attrs:{"data-log":"测试音频",hasMicrophone:e.hasMicrophone},on:{getAudioStatus:e.getAudioStatus}}),t("VideoTest",{staticClass:"content-item",attrs:{hasCamera:e.hasCamera,"data-log":"测试视频"},on:{getCameraStatus:e.getCameraStatus}}),t("TestInternetSpeed",{staticClass:"content-item",attrs:{"data-log":"测试网络",speedStandard:e.speedStandard},on:{getNetworkStatus:e.getNetworkStatus}}),!e.needModifyNickname||e.isParent||e.isAudition?e._e():t("SetNickName",{staticClass:"content-item",attrs:{username:e.username,"data-log":"修改昵称"}})],1),t("div",{staticClass:"footer"},[t("CoursewareDownloading",{staticClass:"content-item",attrs:{coursewareInfo:e.courseware},on:{completeDownload:e.completeDownload,backToPrev:function(t){return e.backToPrev()},enterClass:function(t){return e.enterClass()}}})],1)],1)]],2)},l=[],d=(a("14d9"),a("99af"),a("a9e3"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"courseware-downloading",attrs:{"data-log":"课件下载进度"}},[e._m(0),t("div",{staticClass:"courseware-downloading-status"},["exists"==e.state||"complete"==e.state?t("div",{staticClass:"tips"},[e._v(" "+e._s(e.$t("prepareClass.coursewareDownload"))+" ")]):"progress"==e.state||"start"==e.state?t("div",{staticClass:"tips"},[e._v(" "+e._s(e.downloadTip)+" ")]):t("div",{staticClass:"failed tips"},[t("a-icon",{staticClass:"icon-speed-status",attrs:{component:e.IconFailed}}),e._v(" "+e._s(e.$t("prepareClass.coursewareDownloadWeek"))+" ")],1),t("a-progress",{attrs:{"stroke-color":{"0%":"#ffd518","100%":"#ffaa0a"},showInfo:!1,strokeLinecap:e.square,percent:e.percent}})],1),t("div",{staticClass:"courseware-downloading-right"},[t("a-button",{staticClass:"btn check-btn",class:{"is-waiting":"exists"!=e.state&&"complete"!=e.state},attrs:{type:"primary",shape:"round",size:"large",loading:e.loading,"data-log":e.$t("prepareClass.enterClassroom")},on:{click:e.joinClass}},[e._v(" "+e._s(e.$t("prepareClass.enterClassroom"))+" ")])],1),t("Model",{attrs:{dialogClass:"ready-class-access download-fail",isShowModal:e.showModal,leftBtnText:e.$t("prepareClass.onlineCourseware"),rightBtnText:e.$t("prepareClass.redownload"),title:e.$t("prepareClass.coursewareDownloadWeekTitle"),subTitle:e.$t("prepareClass.coursewareDownloadWeekContent"),zIndex:9999,"data-log":"下载失败弹窗"},on:{leftBtnOperation:e.onlineAccess,rightBtnOperation:e.confirmAccess}}),t("Model",{attrs:{dialogClass:"ready-class-access",isShowModal:e.showOnlineModal,leftBtnText:e.$t("common.cancel"),rightBtnText:e.$t("prepareClass.confirmUser"),title:e.$t("prepareClass.onlineCourseware"),subTitle:e.$t("prepareClass.onlineCoursewareContent"),zIndex:9999,"data-log":"课前准备页协议弹窗"},on:{leftBtnOperation:e.onlineCancelAccess,rightBtnOperation:e.onlineConfirmAccess}})],1)}),u=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"courseware-downloading-left"},[t("span",{staticClass:"icon-courseware"})])}],f=a("5530"),p=(a("ac1f"),a("5319"),a("24ba")),m=a.n(p),h=a("6e1f"),w=a.n(h),g=a("0d52"),C=a("d0db"),v=a("340d"),b=a("e39c"),k=a("bc8a"),S=a("b047"),y=a.n(S),x=a("6ce8"),O={props:{enterUrl:{type:String,default:""},coursewareInfo:{default:function(){},type:Object},isPlayBack:{type:Boolean,default:!1}},components:{Model:v["a"]},computed:{downloadTip:function(){var e=this;return console.info("对象函数 downloadTip,filePath:renderer/components/ReadyClass/CoursewareDownloading/index.vue"),this.$t("prepareClass.coursewareDownloading",{speed:this.speed,minutes:function(){try{var t=Object(b["n"])(e.receivedSize)+Object(b["n"])(e.commonCoursewareReceivedSize)+Object(b["n"])(e.redRainPackageReceivedSize),a=Object(b["n"])(e.totalSize)+Object(b["n"])(e.commonCoursewareTotalSize)+Object(b["n"])(e.redRainPackageTotalSize),s=Math.max(Object(b["p"])(e.speed),Object(b["p"])(e.commonCoursewareSpeed),Object(b["p"])(e.redRainPackageSpeed));if(0!==a&&(e.percent=100*t/a),e.coursewareSensorData.size=1024*a,0==s)return e.$t("prepareClass.coursewareDownloadingSlow");var n=Math.ceil((a-t)/s);return n<60?n+e.$t("prepareClass.second"):n>=60?Math.floor(n/60)+e.$t("prepareClass.minute")+n%60+e.$t("prepareClass.second"):e.$t("prepareClass.coursewareDownloadingSlow")}catch(o){return console.error(e.$t("prepareClass.coursewareDownloadingSlow"),o),e.$t("prepareClass.coursewareDownloadingSlow")}}()})}},data:function(){return{showModal:!1,showOnlineModal:!1,loading:!1,isOnlineCourseware:!1,percent:0,receivedSize:"0M",speed:"0KB/S",totalSize:"0M",commonCoursewareReceivedSize:"0M",commonCoursewareSpeed:"0KB/S",commonCoursewareTotalSize:"0M",redRainPackageReceivedSize:"0M",redRainPackageSpeed:"0KB/S",redRainPackageTotalSize:"0M",state:"start",baseZipUrl:"",baseZipMd5:"",IconFailed:m.a,IconSuccess:w.a,isExistCourseware:!1,catalog:"",downloading:!1,isOffline:!1,startTime:(new Date).getTime(),clickNumber:0,currentDownloadIndex:0,needDownloadFileCount:0,courseWarePackages:{},redPacketRain:{},planId:null,coursewareSensorData:{exit:!1,size:0,startTime:(new Date).getTime(),endTime:(new Date).getTime(),courseEndTime:0}}},watch:{state:function(e){"complete"!==e&&"exists"!==e||(this.coursewareSensorData.endTime=(new Date).getTime(),this.$emit("completeDownload",this.coursewareSensorData)),"fail"===e&&(this.showModal=!0),"fail"!=e||this.isOffline||this.sensorsTrack("fail")},clickNumber:function(e){10==e&&(this.showOnlineModal=!0,this.clickNumber=0)},currentDownloadIndex:function(e){e===this.needDownloadFileCount&&(this.state="complete",this.percent=100,this.sensorsTrack("success"))}},methods:{onlineAccess:function(){console.info("对象函数 onlineAccess,filePath:renderer/components/ReadyClass/CoursewareDownloading/index.vue"),this.showModal=!1,this.showOnlineModal=!0},onlineConfirmAccess:function(){console.info("对象函数 onlineConfirmAccess,filePath:renderer/components/ReadyClass/CoursewareDownloading/index.vue"),this.showOnlineModal=!1,this.isOnlineCourseware=!0,this.joinClass()},onlineCancelAccess:function(){console.info("对象函数 onlineCancelAccess,filePath:renderer/components/ReadyClass/CoursewareDownloading/index.vue"),this.showOnlineModal=!1,this.clickNumber=0},confirmAccess:function(){console.info("对象函数 confirmAccess,filePath:renderer/components/ReadyClass/CoursewareDownloading/index.vue"),this.showModal=!1,this.reloadCourseware()},getInfo:function(){console.info("对象函数 getInfo,filePath:renderer/components/ReadyClass/CoursewareDownloading/index.vue"),this.$Message.info(this.$t("prepareClass.waiting"))},reloadCourseware:function(){var e=this;return Object(r["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.info("对象函数 reloadCourseware,filePath:renderer/components/ReadyClass/CoursewareDownloading/index.vue"),C["a"].send({tag:"coursewareDownload",content:{msg:"重新加载课件"},level:"error"}),e.coursewareInfo&&g["downloaderApi"].removeListener(e.coursewareInfo.baseZipUrl),e.currentDownloadIndex=0,e.speed="0KB/S",e.commonCoursewareSpeed="0KB/S",e.startDown();case 7:case"end":return t.stop()}}),t)})))()},getCommonCourseware:function(){var e=this;return Object(r["a"])(Object(o["a"])().mark((function t(){var a,s;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.info("对象函数 getCommonCourseware,filePath:renderer/components/ReadyClass/CoursewareDownloading/index.vue"),t.next=3,Object(k["e"])().catch((function(e){return console.info("箭头函数 initConfigApi的catch(err)",e,"filePath:renderer/components/ReadyClass/CoursewareDownloading/index.vue"),C["a"].send({tag:"coursewareDownload",content:{msg:"获取基础包下载链接错误",err:e}}),e||{}}));case 3:if(a=t.sent,a&&0==a.code){t.next=8;break}return e.state="fail",C["a"].send({tag:"coursewareDownload",content:{msg:"获取基础包下载链接错误,code不为0",res:a}}),t.abrupt("return");case 8:s=a.data||{},e.courseWarePackages=s.courseWarePackages&&s.courseWarePackages.length?s.courseWarePackages[1]:{},console.log("预加载课件基础资源包数据: ",e.courseWarePackages),e.courseWarePackages.url&&(e.needDownloadFileCount+=1);case 12:case"end":return t.stop()}}),t)})))()},downloadCommonCourseware:function(){var e=this;console.info("对象函数 downloadCommonCourseware,filePath:renderer/components/ReadyClass/CoursewareDownloading/index.vue"),console.log("下载基础课件包"),g["downloaderApi"].downloadCourseware({fileURL:this.courseWarePackages.url,fileMD5:this.courseWarePackages.zipMd5,retry:2,timeout:1e4,start:function(e){console.log("课件基础包下载开始:",e),C["a"].send({tag:"coursewareDownload",content:{msg:"课件基础包下载开始",res:e},level:"info"})},progress:function(t){console.log("课件基础包下载进度:",t),C["a"].send({tag:"coursewareDownload",content:{msg:"课件基础包下载进度",res:t},level:"info"}),e.commonCoursewareReceivedSize=t.receivedSize,e.commonCoursewareSpeed=t.speed.replace("NaN","0"),e.commonCoursewareTotalSize=t.totalSize},complete:function(t){console.log("课件基础包下载完成:",t),C["a"].send({tag:"coursewareDownload",content:{msg:"课件基础包下载完成",res:t},level:"info"}),e.currentDownloadIndex++},fail:function(t){console.log("课件基础包下载失败:",t),e.state="fail",C["a"].send({tag:"coursewareDownload",content:{msg:"课件基础包下载失败",res:t},level:"error"})},exists:function(t){console.log("课件基础包已经存在:",t),C["a"].send({tag:"coursewareDownload",content:{msg:"课件基础包已经存在",res:t},level:"info"}),e.currentDownloadIndex++}})},downloadCourseware:function(){var e=this;return Object(r["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.info("对象函数 downloadCourseware,filePath:renderer/components/ReadyClass/CoursewareDownloading/index.vue"),e.coursewareInfo){t.next=4;break}return C["a"].send({tag:"coursewareDownload",content:{msg:"课件内容不存在"},level:"error"}),t.abrupt("return");case 4:return t.next=6,g["downloaderApi"].downloadCourseware({fileURL:e.coursewareInfo.baseZipUrl,fileMD5:e.coursewareInfo.baseZipMd5,retry:2,timeout:1e4,start:function(e){C["a"].send({tag:"coursewareDownload",content:{msg:"开始下载课件",res:e},level:"info"})},progress:function(t){C["a"].send({tag:"coursewareDownload",content:{msg:"下载课件进度",res:t},level:"info"}),e.receivedSize=t.receivedSize,e.speed=t.speed.replace("NaN","0"),e.totalSize=t.totalSize},complete:function(t){C["a"].send({tag:"coursewareDownload",content:{msg:"课件下载完成",res:t},level:"info"}),e.currentDownloadIndex++,e.downLoadCallBack(t)},fail:function(t){C["a"].send({tag:"coursewareDownload",content:{msg:"课件下载失败",res:t},level:"error"}),e.state="fail",e.downLoadCallBack(t)},exists:function(t){C["a"].send({tag:"coursewareDownload",content:{msg:"课件文件已经存在",res:t},level:"info"}),e.coursewareSensorData.exit=!0,e.currentDownloadIndex++},extract:function(e){console.log(e),C["a"].send({tag:"coursewareDownload",content:{msg:"课件解压",res:e},level:"info"})}});case 6:case"end":return t.stop()}}),t)})))()},downloadRedRainPackage:function(){var e=this;console.info("对象函数 downloadRedRainPackage,filePath:renderer/components/ReadyClass/CoursewareDownloading/index.vue");var t={url:this.redPacketRain.offlineZipPath,packageSize:this.redPacketRain.offlineZipSize,packageMd5:this.redPacketRain.offlineZipMd5};C["a"].send({tag:"coursewareDownload",content:Object(f["a"])({msg:"红包雨游戏包下载地址"},t),level:"info"}),g["downloaderApi"].downloadCourseware({retry:2,timeout:1e4,fileURL:this.redPacketRain.offlineZipPath,fileMD5:this.redPacketRain.offlineZipMd5,start:function(e){C["a"].send({tag:"coursewareDownload",content:{msg:"红包雨游戏包下载开始",res:e},level:"info"}),console.log("红包雨游戏包下载开始:",e)},progress:function(t){C["a"].send({tag:"coursewareDownload",content:{msg:"红包雨游戏包下载进度",res:t},level:"info"}),console.log("红包雨游戏包下载进度:",t),e.redRainPackageReceivedSize=t.receivedSize,e.redRainPackageSpeed=t.speed.replace("NaN","0"),e.redRainPackageTotalSize=t.totalSize},complete:function(a){e.currentDownloadIndex++,console.log("红包雨游戏downloadCourseware课件下载完成:",a),C["a"].send({tag:"coursewareDownload",content:Object(f["a"])(Object(f["a"])({},t),{},{downloadCost:parseInt(a.uptime/1e3),downloadPackageMd5:a.MD5,isSuccess:1,msg:"红包雨游戏包下载完成"})}),e.$sensors.track("pc_courseware_download",Object(f["a"])(Object(f["a"])({},t),{},{statusDesc:"success",downloadCost:parseInt(a.uptime/1e3),downloadPackageMd5:a.MD5||""}))},exists:function(t){console.log("红包雨基础包已经存在:",t),C["a"].send({tag:"coursewareDownload",content:{msg:"红包雨基础包已经存在",res:t},level:"info"}),e.currentDownloadIndex++},fail:function(a){console.log("课件下载失败:",a),e.state="fail",C["a"].send({tag:"coursewareDownload",content:Object(f["a"])(Object(f["a"])({},t),{},{downloadCost:parseInt(a.uptime/1e3),downloadPackageMd5:a.MD5||"",isSuccess:0,msg:"红包雨游戏包下载失败",res:a})}),e.$sensors.track("pc_courseware_download",Object(f["a"])(Object(f["a"])({},t),{},{statusDesc:"fail",downloadCost:parseInt(a.uptime/1e3),downloadPackageMd5:a.MD5||""}))}})},downLoadCallBack:function(e){console.info("对象函数 downLoadCallBack(res)",e,"filePath:renderer/components/ReadyClass/CoursewareDownloading/index.vue");var t=this.$route.query.planId,a="complete"==e.state?1:0,s={planId:t,coursewareId:this.coursewareInfo.id,url:this.coursewareInfo.baseZipUrl,packageSize:this.coursewareInfo.baseZipSize,downloadCost:parseInt(e.uptime/1e3),packageMd5:this.coursewareInfo.baseZipMd5,downloadPackageMd5:e.MD5||""};C["a"].send({tag:"课前准备页",content:Object(f["a"])(Object(f["a"])({},s),{},{msg:"课前课件下载",isSuccess:a})}),this.$sensors.track("pc_courseware_download",Object(f["a"])(Object(f["a"])({},s),{},{statusDesc:a?"success":"fail"})),this.$sensors.track("pc_ready_class_check",{checkType:"课件下载状态",result:a?"success":"fail"})},sensorsTrack:function(e){this.$sensors.track("coursewareDownload",{planId:this.planId,downloadResult:e,plan_mode:"直播"})},testOfflineStatus:function(){var e=this;return Object(r["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.info("对象函数 testOfflineStatus,filePath:renderer/components/ReadyClass/CoursewareDownloading/index.vue"),window.addEventListener("offline",(function(){console.info("箭头函数 监听 offline,filePath:renderer/components/ReadyClass/CoursewareDownloading/index.vue"),C["a"].send({tag:"coursewareDownload",content:{msg:"下载课件监听断网"},level:"error"}),"complete"!==e.state&&"exists"!==e.state&&(e.state="fail"),e.isOffline=!0}));case 2:case"end":return t.stop()}}),t)})))()},testOnlineStatus:function(){var e=this;return Object(r["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.info("对象函数 testOnlineStatus,filePath:renderer/components/ReadyClass/CoursewareDownloading/index.vue"),window.addEventListener("online",(function(){console.info("箭头函数 监听 online,filePath:renderer/components/ReadyClass/CoursewareDownloading/index.vue"),e.isOffline=!1}));case 2:case"end":return t.stop()}}),t)})))()},joinClass:y()((function(){var e=this.state,t=this.isOnlineCourseware,a=this.clickNumber,s=this.enterUrl;if(C["a"].send({tag:"coursewareDownload",content:{msg:"课前准备页-点击进入教室",state:e,isOnlineCourseware:t,clickNumber:a,enterUrl:s}}),"exists"!==e&&"complete"!==e&&!t)return this.clickNumber+=1,void(10!=this.clickNumber&&this.getInfo());this.isOffline?this.$Message.error({content:this.$t("prepareClass.enterClassroomError"),duration:1}):(this.loading=!0,this.$sensors.track("useCoursewareType",{coursewareType:t?"online":"local"}),this.$emit("enterClass"))}),1100),startDown:function(){console.info("对象函数 startDown,filePath:renderer/components/ReadyClass/CoursewareDownloading/index.vue"),this.state="progress",0!==this.needDownloadFileCount?(this.downloadCourseware(),this.downloadCommonCourseware(),this.downloadRedRainPackage()):this.state="complete"},getRedPackageRainInfo:function(){var e=this;return Object(r["a"])(Object(o["a"])().mark((function t(){var a,s,n;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.info("对象函数 getRedPackageRainInfo,filePath:renderer/components/ReadyClass/CoursewareDownloading/index.vue"),t.next=3,Object(x["a"])().catch((function(e){return console.info("箭头函数 getRedPacketRain的catch(err)",e,"filePath:renderer/components/ReadyClass/CoursewareDownloading/index.vue"),C["a"].send({tag:"coursewareDownload",content:{msg:"获取红包雨基础包下载链接错误",err:e}}),e}));case 3:if(a=t.sent,s=a.code,n=a.data.redbagrainPackage,0===+s){t.next=10;break}return e.state="fail",C["a"].send({tag:"coursewareDownload",content:{msg:"获取红包雨基础包接口code码不为0",code:s}}),t.abrupt("return");case 10:e.redPacketRain=n,e.redPacketRain.offlineZipPath&&(e.needDownloadFileCount+=1);case 12:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;this.planId=this.$route.query.planId,this.$nextTick(Object(r["a"])(Object(o["a"])().mark((function t(){var a,s;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("课件下载",e.coursewareInfo),null!==(a=e.coursewareInfo)&&void 0!==a&&a.baseZipUrl?(e.needDownloadFileCount+=1,e.totalSize=((null===(s=e.coursewareInfo)||void 0===s?void 0:s.baseZipSize)||0)+"B"):C["a"].send({tag:"coursewareDownload",content:{msg:"课前准备页-没有课件信息"},level:"error"}),console.log("看下coursewareInfo",e.coursewareInfo),t.next=5,e.getCommonCourseware();case 5:return t.next=7,e.getRedPackageRainInfo();case 7:e.startDown(),e.testOfflineStatus(),e.testOnlineStatus();case 10:case"end":return t.stop()}}),t)}))))},beforeDestroy:function(){console.info("对象函数 beforeDestroy,filePath:renderer/components/ReadyClass/CoursewareDownloading/index.vue"),this.coursewareInfo&&g["downloaderApi"].removeListener(this.coursewareInfo.baseZipUrl)}},D=O,P=(a("1710"),a("2877")),j=Object(P["a"])(D,d,u,!1,null,"04859c2e",null),M=j.exports,T=function(){var e=this,t=e._self._c;return t("div",{staticClass:"test-video"},[e._m(0),"testing"===e.cameraStatus?[t("div",{staticClass:"test-video-right"},[t("LottieEmoticon",{attrs:{lottieUrl:e.lottieUrl,width:18,height:18,loopLottie:!0}})],1)]:"good"===e.cameraStatus&&e.hasCamera?[t("div",{staticClass:"test-video-right"},[t("p",{staticClass:"item-title"},[e._v(e._s(e.$t("prepareClass.great")))]),t("a-icon",{staticClass:"icon-speed-status",attrs:{component:e.iconSpeedStatus}})],1)]:[e.hasCamera?t("div",{staticClass:"test-video-right cursor",on:{click:e.setCamera}},[t("p",{staticClass:"item-title"},[e._v(e._s(e.$t("prepareClass.cameraAccess")))]),t("a-icon",{staticClass:"icon-speed-status",attrs:{component:e.iconSpeedStatus}})],1):t("div",{staticClass:"test-video-right"},[t("p",{staticClass:"item-title"},[e._v(e._s(e.$t("prepareClass.cameraAvailable")))]),t("a-icon",{staticClass:"icon-speed-status",attrs:{component:e.iconSpeedStatus}})],1)],t("Model",{attrs:{dialogClass:"ready-class-access",isShowModal:e.showModal,leftBtnText:e.$t("common.cancel"),rightBtnText:e.$t("classroom.modules.checkDevice.去设置"),title:e.$t("prepareClass.cameraAccessWindow"),subTitle:e.$t("prepareClass.cameraAccessContent"),zIndex:9999},on:{leftBtnOperation:e.cancelAccess,rightBtnOperation:e.confirmAccess}})],2)},R=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"test-video-left"},[t("div",{staticClass:"icon-item icon_audio"})])}],_=a("099c"),N=a("9e65"),$=a.n(N),I=a("3aa1"),A={components:{LottieEmoticon:I["a"],Model:v["a"]},props:{hasCamera:{style:Boolean,default:!0}},data:function(){return{IconFailed:m.a,IconSuccess:w.a,IconNormal:$.a,showModal:!1,cameraStatus:"testing",lottieUrl:"./lottiefiles/readyClass/check_data.json",cameraAccess:""}},computed:{iconSpeedStatus:function(){return console.info("对象函数 iconSpeedStatus,filePath:renderer/components/ReadyClass/VideoTest/index.vue"),"good"==this.cameraStatus&&this.hasCamera?w.a:"weak"!=this.cameraStatus&&this.hasCamera?"normal"==this.cameraStatus?$.a:"":m.a}},methods:{cancelAccess:function(){console.info("对象函数 cancelAccess,filePath:renderer/components/ReadyClass/VideoTest/index.vue"),this.showModal=!1},confirmAccess:function(){console.info("对象函数 confirmAccess,filePath:renderer/components/ReadyClass/VideoTest/index.vue"),this.showModal=!1,g["nativeApi"].openPreferences("security","camera")},setCamera:function(){console.info("对象函数 setCamera,filePath:renderer/components/ReadyClass/VideoTest/index.vue"),this.showModal=!0},checkCameraAccess:function(){var e=this;return Object(r["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.info("对象函数 checkCameraAccess,filePath:renderer/components/ReadyClass/VideoTest/index.vue"),t.next=3,Object(_["b"])();case 3:if(a=t.sent,"granted"!==a){t.next=8;break}e.cameraStatus="good",t.next=21;break;case 8:if("not-determined"!==a){t.next=20;break}if("mac"!==e.platform){t.next=15;break}return t.next=12,Object(_["a"])();case 12:t.t0=t.sent,t.next=16;break;case 15:t.t0=!0;case 16:e.cameraAccess=t.t0,e.cameraAccess?e.cameraStatus="good":e.cameraStatus="weak",t.next=21;break;case 20:e.cameraStatus="weak";case 21:e.$emit("getCameraStatus",e.cameraStatus);case 22:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;return Object(r["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.platform=Object(b["l"])(),e.checkCameraAccess();case 2:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){console.info("对象函数 beforeDestroy,filePath:renderer/components/ReadyClass/VideoTest/index.vue")}},B=A,z=(a("e315"),Object(P["a"])(B,T,R,!1,null,"8268f140",null)),L=z.exports,U=function(){var e=this,t=e._self._c;return t("div",{staticClass:"test-audio"},[e._m(0),"testing"===e.audioStatus?[t("div",{staticClass:"test-audio-right"},[t("LottieEmoticon",{attrs:{lottieUrl:e.lottieUrl,width:18,height:18,loopLottie:!0}})],1)]:"good"===e.audioStatus&&e.hasMicrophone?[t("div",{staticClass:"test-audio-right"},[t("p",{staticClass:"item-title"},[e._v(e._s(e.$t("prepareClass.great")))]),t("a-icon",{staticClass:"icon-speed-status",attrs:{component:e.iconSpeedStatus}})],1)]:[e.hasMicrophone?t("div",{staticClass:"test-audio-right cursor",on:{click:e.setAudio}},[t("p",{staticClass:"item-title"},[e._v(e._s(e.$t("prepareClass.audioAccess")))]),t("a-icon",{staticClass:"icon-speed-status",attrs:{component:e.iconSpeedStatus}})],1):t("div",{staticClass:"test-audio-right"},[t("p",{staticClass:"item-title"},[e._v(e._s(e.$t("prepareClass.audioAvailable")))]),t("a-icon",{staticClass:"icon-speed-status",attrs:{component:e.iconSpeedStatus}})],1)],t("Model",{attrs:{dialogClass:"ready-class-access",isShowModal:e.showModal,leftBtnText:e.$t("common.cancel"),rightBtnText:e.$t("classroom.modules.checkDevice.去设置"),title:e.$t("prepareClass.audioAccessWindow"),subTitle:e.$t("prepareClass.audioAccessContent"),zIndex:9999},on:{leftBtnOperation:e.cancelAccess,rightBtnOperation:e.confirmAccess}})],2)},E=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"test-audio-left"},[t("div",{staticClass:"icon-item icon_audio"})])}],W={components:{LottieEmoticon:I["a"],Model:v["a"]},props:{hasMicrophone:{style:Boolean,default:!0}},data:function(){return{IconFailed:m.a,IconSuccess:w.a,IconNormal:$.a,showModal:!1,audioStatus:"testing",lottieUrl:"./lottiefiles/readyClass/check_data.json",microphoneAccess:""}},computed:{iconSpeedStatus:function(){return console.info("对象函数 iconSpeedStatus,filePath:renderer/components/ReadyClass/AudioTest/index.vue"),"good"==this.audioStatus&&this.hasMicrophone?w.a:"weak"!=this.audioStatus&&this.hasMicrophone?"normal"==this.audioStatus?$.a:"":m.a}},methods:{cancelAccess:function(){console.info("对象函数 cancelAccess,filePath:renderer/components/ReadyClass/AudioTest/index.vue"),this.showModal=!1},confirmAccess:function(){console.info("对象函数 confirmAccess,filePath:renderer/components/ReadyClass/AudioTest/index.vue"),this.showModal=!1,g["nativeApi"].openPreferences("security","microphone")},setAudio:function(){console.info("对象函数 setAudio,filePath:renderer/components/ReadyClass/AudioTest/index.vue"),this.showModal=!0},checkMicrophoneAccess:function(){var e=this;return Object(r["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.info("对象函数 checkMicrophoneAccess,filePath:renderer/components/ReadyClass/AudioTest/index.vue"),t.next=3,Object(_["e"])();case 3:if(a=t.sent,"granted"!==a){t.next=8;break}e.audioStatus="good",t.next=21;break;case 8:if("not-determined"!==a){t.next=20;break}if("mac"!==e.platform){t.next=15;break}return t.next=12,Object(_["d"])();case 12:t.t0=t.sent,t.next=16;break;case 15:t.t0=!0;case 16:e.microphoneAccess=t.t0,e.microphoneAccess?e.audioStatus="good":e.audioStatus="weak",t.next=21;break;case 20:e.audioStatus="weak";case 21:e.$emit("getAudioStatus",e.audioStatus);case 22:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.platform=Object(b["l"])(),this.checkMicrophoneAccess()},beforeDestroy:function(){console.info("对象函数 beforeDestroy,filePath:renderer/components/ReadyClass/AudioTest/index.vue")}},Z=W,F=(a("01dc8"),Object(P["a"])(Z,U,E,!1,null,"01a5a424",null)),q=F.exports,G=function(){var e=this,t=e._self._c;return t("div",{staticClass:"test-internet",attrs:{"data-log":"测试网络"}},[e._m(0),t("div",{staticClass:"test-internet-right"},[t("div",{staticClass:"item-text"},["good"===e.rtcStatus||"testing"===e.rtcStatus?t("p",{staticClass:"item-title"}):t("p",{staticClass:"item-title"},[e._v(e._s(e.$t("prepareClass.networkWeek")))])]),"testing"===e.rtcStatus?[t("div",{staticClass:"test-internet-right"},[t("LottieEmoticon",{attrs:{lottieUrl:e.lottieUrl,width:18,height:18,loopLottie:!0}})],1)]:"good"===e.rtcStatus?[t("div",{staticClass:"test-internet-right cursor",on:{click:e.getInfo}},[t("p",{staticClass:"item-title"},[e._v(e._s(e.$t("prepareClass.great")))]),t("a-icon",{staticClass:"icon-speed-status",attrs:{component:e.iconSpeedStatus}})],1)]:[t("div",{staticClass:"test-internet-right cursor",on:{click:e.setNetwork}},[t("a-icon",{staticClass:"icon-speed-status",attrs:{component:e.iconSpeedStatus}})],1)]],2),t("Model",{attrs:{dialogClass:"ready-class-access",isShowModal:e.showModal,leftBtnText:e.$t("prepareClass.retestNetwork"),rightBtnText:e.$t("common.gotIt"),title:e.$t("prepareClass.networkWeek"),subTitle:e.$t("prepareClass.networkWeekContent"),zIndex:9999,"data-log":"测速弹窗"},on:{leftBtnOperation:e.confirmAccess,rightBtnOperation:e.cancelAccess}}),t("Model",{attrs:{dialogClass:"ready-class-access got-info",isShowModal:e.showGoodModal,rightBtnText:e.$t("common.gotIt"),title:e.$t("prepareClass.networkGood"),subTitle:e.$t("prepareClass.networkGoodContent"),zIndex:9999,"data-log":"测速网络良好弹窗"},on:{rightBtnOperation:e.cancelAccessNetwork}})],1)},V=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"test-internet-left"},[t("div",{staticClass:"icon-item icon_audio"})])}],K=a("5880"),H=a("d15d"),J=a("383d"),Q={components:{LottieEmoticon:I["a"],Model:v["a"]},data:function(){return{IconFailed:m.a,IconSuccess:w.a,IconNormal:$.a,showModal:!1,showGoodModal:!1,rtcStatus:"testing",rtcToken:null,thinkClass:null,reservedTimer:null,reservedTime:15e3,lottieUrl:"./lottiefiles/readyClass/check_data.json"}},props:{speedStandard:{default:function(){},type:Object}},computed:Object(f["a"])(Object(f["a"])({},Object(K["mapGetters"])({deviceCheckData:"common/deviceCheckData"})),{},{iconSpeedStatus:function(){return"good"==this.rtcStatus?w.a:"weak"==this.rtcStatus?m.a:"normal"==this.rtcStatus?$.a:""},statusConfig:function(){return this.$t("classroom.modules.networkStatus.statusMap")}}),methods:{cancelAccessNetwork:function(){this.showGoodModal=!1},cancelAccess:function(){this.showModal=!1},getInfo:function(){this.showGoodModal=!0},setNetwork:function(){this.showModal=!0},confirmAccess:function(){this.showModal=!1,this.thinkClass&&(this.thinkClass.release(),this.thinkClass=null),this.rtcTestSpeed()},getDeviceCheckData:function(){var e=this;return Object(r["a"])(Object(o["a"])().mark((function t(){var a,s;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(J["d"])();case 2:if(s=t.sent,0!==(null===s||void 0===s?void 0:s.code)){t.next=5;break}return t.abrupt("return",e.rtcToken=null===s||void 0===s||null===(a=s.data)||void 0===a?void 0:a.rtcToken);case 5:e.$Modal.warning({centered:!0,class:"modal-simple modal-service-data",content:e.$t("common.components.errorStatus.message"),width:"380px",okText:e.$t("common.gotIt")});case 6:case"end":return t.stop()}}),t)})))()},rtcTestSpeed:function(){var e=this;return Object(r["a"])(Object(o["a"])().mark((function t(){var a,s,n;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.rtcToken=(null===(a=e.speedStandard)||void 0===a?void 0:a.rtcToken)||(null===(s=e.deviceCheckData)||void 0===s?void 0:s.rtcToken),e.rtcToken){t.next=4;break}return t.next=4,e.getDeviceCheckData();case 4:n=new H["a"]({rtcConfig:{token:e.rtcToken,teacherUid:parseInt(1e4*Math.random()+1,10)}}),e.thinkClass=n,n.on("ready",(function(){n.enableLastmileTest()})),n.on("lastMileQuality",(function(t){var a=t;console.log("rtcStatus: "+a),e.rtcStatus=1===a||2===a||3===a?"good":4===a||5===a||6===a?"weak":"testing",e.$emit("getNetworkStatus",e.rtcStatus),"good"!==e.rtcStatus&&C["a"].send({tag:"userRtcQuality",content:{result:e.rtcStatus,rtcStatus:a}})})),n.on("localVideoStateChanged",(function(t,a){6!=a&&7!=a||e.$bus.$emit("setMediaStateEvent",{key:"hasCamera",value:!1})})),n.on("localAudioStateChanged",(function(t,a){6!=a&&7!=a||e.$bus.$emit("setMediaStateEvent",{key:"hasMicrophone",value:!1})}));case 10:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.rtcTestSpeed()},beforeDestroy:function(){this.thinkClass&&(this.thinkClass.release(),this.thinkClass=null)}},X=Q,Y=(a("5792"),Object(P["a"])(X,G,V,!1,null,"6635da56",null)),ee=Y.exports,te=function(){var e=this,t=e._self._c;return t("div",{staticClass:"set-nickname"},[t("div",{staticClass:"set-nickname-left"},[t("div",{staticClass:"icon-item icon-avatar",style:{backgroundImage:"url(".concat(e.avatarUrl,")"),backgroundSize:"100% 100%"}})]),t("div",{staticClass:"set-nickname-right",on:{click:e.setNickname}},[e.newName?t("p",{staticClass:"item-title new-name"},[e._v(e._s(e.newName))]):t("p",{staticClass:"item-title"},[e._v(e._s(e.$t("prepareClass.setNickName")))]),t("a-icon",{staticClass:"icon-status",attrs:{component:e.iconStatus}})],1),t("Model",{attrs:{dialogClass:"ready-class-access",isShowModal:e.showModal,leftBtnText:e.$t("common.cancel"),rightBtnText:e.$t("common.confirm"),title:e.$t("prepareClass.setNickName"),zIndex:9,disabled:e.isDisable,rightLoading:e.isLoading},on:{leftBtnOperation:e.cancelAccess,rightBtnOperation:e.save}},[t("a-form-model",{ref:"nickNameForm",attrs:{model:e.formData,rules:e.rules,colon:!1}},[t("a-form-model-item",{attrs:{prop:"nickName"}},[t("a-input",{attrs:{maxlength:10,allowClear:""},on:{change:e.validateNickName},model:{value:e.formData.nickName,callback:function(t){e.$set(e.formData,"nickName",t)},expression:"formData.nickName"}}),e.isDisable?t("a-icon",{staticClass:"icon-warning-edit",attrs:{component:e.iconWarningEdit}}):e._e()],1)],1),t("p",{staticClass:"tips"},[e._v(e._s(e.$t("prepareClass.setNickNameTip")))])],1)],1)},ae=[],se=(a("498a2"),a("fb6a"),a("ae3f")),ne=a("92e5"),oe={components:{Model:v["a"]},props:{username:{type:String,default:""}},data:function(){return{formData:{nickName:""},isDisable:!0,isLoading:!1,initName:"",preName:"",newName:"",avatarUrl:"",rules:{nickName:[{pattern:/^[a-zA-Z0-9\s\u4e00-\u9fa5]{0,16}$/,message:this.$t("prepareClass.validateInput"),trigger:"change"}]},showModal:!1,hasSubmit:!1}},computed:{iconStatus:function(){return console.info("对象函数 iconStatus,filePath:renderer/components/ReadyClass/SetNickName/index.vue"),this.hasSubmit?w.a:m.a}},methods:{getLocalUserInfo:function(){var e=this;return Object(r["a"])(Object(o["a"])().mark((function t(){var a,s,n;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.info("对象函数 getLocalUserInfo,filePath:renderer/components/ReadyClass/SetNickName/index.vue"),t.next=3,Object(ne["a"])();case 3:a=t.sent,s=a.nickName,n=a.avatar,e.initName=s,e.avatarUrl=n;case 8:case"end":return t.stop()}}),t)})))()},validateNickName:function(){var e=this;return Object(r["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.info("对象函数 validateNickName,filePath:renderer/components/ReadyClass/SetNickName/index.vue"),e.$refs.nickNameForm.validate((function(t){console.info("箭头函数 validate(valid)",t,"filePath:renderer/components/ReadyClass/SetNickName/index.vue"),e.isDisable=!t,""==e.formData.nickName.trim()&&(e.isDisable=!0),t?e.preName=e.formData.nickName:e.formData.nickName&&(e.formData.nickName=e.preName,""!==e.preName.trim()&&(e.isDisable=!1))}));case 2:case"end":return t.stop()}}),t)})))()},save:function(){var e=this;return Object(r["a"])(Object(o["a"])().mark((function t(){var a,s;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.info("对象函数 save,filePath:renderer/components/ReadyClass/SetNickName/index.vue"),a=e.formData.nickName.trim(),a!=e.initName){t.next=4;break}return t.abrupt("return");case 4:return e.isLoading=!0,t.next=7,Object(se["f"])({nickName:a}).catch((function(e){return console.info("箭头函数 modifyUserInfoApi的catch(err)",e,"filePath:renderer/components/ReadyClass/SetNickName/index.vue"),console.error("修改昵称接口报错",e),e}));case 7:if(s=t.sent,0===+s.code){t.next=12;break}return e.$Message.error({content:e.$t("prepareClass.setNickNameError"),duration:3}),e.isLoading=!1,t.abrupt("return");case 12:e.hasSubmit=!0,e.newName=a,e.$Message.config({getContainer:function(){return document.getElementById("ready-class")},top:"300px"}),e.isLoading=!1,e.initName=a,e.formData.nickName=a,e.showModal=!1;case 19:case"end":return t.stop()}}),t)})))()},cancelAccess:function(){console.info("对象函数 cancelAccess,filePath:renderer/components/ReadyClass/SetNickName/index.vue"),this.newName&&(this.formData.nickName=this.newName),this.validateNickName(),this.showModal=!1},setNickname:function(){console.info("对象函数 setNickname,filePath:renderer/components/ReadyClass/SetNickName/index.vue"),this.showModal=!0}},mounted:function(){this.getLocalUserInfo(),this.username&&(this.formData.nickName=this.username.slice(0,16),this.isDisable=!1)},beforeDestroy:function(){console.info("对象函数 beforeDestroy,filePath:renderer/components/ReadyClass/SetNickName/index.vue")}},re=oe,ie=(a("6e22"),Object(P["a"])(re,te,ae,!1,null,"4f86ffda",null)),ce=ie.exports,le=a("aaf0"),de=a("5e24"),ue=a("bd12"),fe=a("e79d"),pe=a("0a06a"),me=a("2b6b"),he=a("9ca9"),we={components:{Loading:ue["a"],Header:fe["a"],CoursewareDownloading:M,AudioTest:q,VideoTest:L,TestInternetSpeed:ee,SetNickName:ce,ErrorStatus:le["a"]},props:["playback"],data:function(){return{isAudition:!1,isParent:!1,needModifyNickname:!1,changeMinutes:0,isLoading:!0,speedStandard:{},isCompleteDownload:!1,isError:!1,audioStatus:0,cameraStatus:0,networkStatus:0,networkStatusDesc:"",backUrl:this.$route.query.backUrl||"/courses",courseware:{},sign:{},hasCamera:!0,hasMicrophone:!0,username:"",startTime:0,coursewareInfo:{},followCoursewareRatio:!1}},computed:{showSignIn:function(){return!this.isAudition&&!this.isParent&&1===this.sign.status}},methods:{enterClass:function(){var e,t,a,s=this;this.$sensors.track("pc_ready_class_enter",{type:"liveClass",isCompleteDownload:this.isCompleteDownload,networkStatus:this.networkStatusDesc});var n={micDetecting:this.audioStatus,camDetecting:this.cameraStatus,netDetecting:this.networkStatus};this.$sensors.track("Stu_PreparePageDetecting",n),Object(me["setPlanId"])(null===(e=this.$route)||void 0===e?void 0:e.query,!0),this.coursewareInfo.courseStartTime=this.startTime,pe["d"](null===(t=this.$route)||void 0===t?void 0:t.query,n,this.coursewareInfo,null===(a=this.$store)||void 0===a||null===(a=a.state)||void 0===a||null===(a=a.common)||void 0===a?void 0:a.timeOffset),setTimeout((function(){var e,t=s.$route.query,a=t.classId,n=t.planId,o=t.bizId,r=t.lessonType,i=t.from,c=t.subPlatformType,l=void 0===c?0:c,d=t.isParent,u=void 0===d?0:d,f=t.backUrl,p="classId=".concat(a,"&planId=").concat(n,"&bizId=").concat(o,"&subPlatformType=").concat(l,"&isParent=").concat(u,"&lessonType=").concat(r,"&from=").concat(i,"&followCoursewareRatio=").concat(s.followCoursewareRatio);null!==(e=s.courseware)&&void 0!==e&&e.id&&(p+="&coursewareId=".concat(s.courseware.id,"&coursewareRate=").concat(s.courseware.rate));var m=f;+u||s.playback||(m=f+"&nps=1"),p+="&backUrl=".concat(m);var h={0:"largeClass.html",1:"largeClass.html",2:"smallClass.html"},w=h[l]||"largeClass.html",g="/".concat(w,"?").concat(p);Object(he["a"])(g),C["a"].send({tag:"userTrack",content:{msg:"课前准备页-点击进入课堂",url:g}})}),200)},backToPrev:function(){this.$router.push({path:"/courses"}),C["a"].send({tag:"userTrack",content:{msg:"退出课前准备页"}})},getAudioStatus:function(e){this.audioStatus="good"===e&&this.hasMicrophone?0:1},getCameraStatus:function(e){this.cameraStatus="good"===e&&this.hasCamera?0:1},getNetworkStatus:function(e){this.networkStatus="good"===e?0:"weak"===e?1:2,this.networkStatusDesc=e},handleRefresh:function(){this.isError=!1,this.queryPreClassPrepare()},completeDownload:function(e){this.coursewareInfo=e,this.coursewareInfo.courseStartTime=this.startTime,this.isCompleteDownload=!0},queryPreClassPrepare:function(){var e=this;return Object(r["a"])(Object(o["a"])().mark((function t(){var a,s,n,r,i,c,l,d,u,f,p,m,h;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$route.query,s=a.planId,n=a.classId,e.isLoading=!0,t.next=4,Object(de["a"])(e,{planId:1*s,classId:1*n}).catch((function(t){return console.error("课前准备基础数据请求接口报错",t),e.isError=!0,t||{}}));case 4:if(r=t.sent,e.isLoading=!1,0==(null===r||void 0===r?void 0:r.code)){t.next=10;break}return console.error("课前准备基础数据请求接口code不等于0",r),e.isError=!0,t.abrupt("return");case 10:i=r.data,c=i.deviceDetection,l=i.sign,d=i.courseware,u=i.needModifyNickname,f=i.timestamp,p=i.username,m=i.startTime,h=i.followCoursewareRatio,e.needModifyNickname=u,e.username=p||"",e.speedStandard=c,e.startTime=m,e.sign=l,e.courseware=d,e.followCoursewareRatio=h,Object(me["setTimeOffset"])(1e3*f-(new Date).getTime()),e.$store.dispatch("common/setTimeOffset",f);case 20:case"end":return t.stop()}}),t)})))()},setMediaState:function(e){this[e.key]=e.value}},created:function(){var e=this.$route.query,t=e.isAudition,a=e.isParent;this.isAudition=!!Number(t),this.isParent=!!Number(a)},mounted:function(){var e=this;return Object(r["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return C["a"].send({tag:"userTrack",content:{msg:"进入课前准备页"}}),t.next=3,e.queryPreClassPrepare();case 3:return e.$bus.$on("setMediaStateEvent",e.setMediaState),t.next=6,e.$store.dispatch("common/initCloudConfig");case 6:case"end":return t.stop()}}),t)})))()},unmounted:function(){this.$bus.$off("setMediaStateEvent",this.setMediaState)}},ge=we,Ce=(a("f312"),Object(P["a"])(ge,c,l,!1,null,null,null)),ve=Ce.exports,be={components:{Toolbar:i["a"],ReadyClass:ve},data:function(){return{isPlayBack:0}},beforeRouteEnter:function(e,t,a){return Object(r["a"])(Object(o["a"])().mark((function s(){return Object(o["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:console.info("路由跳转",e.fullPath,t.fullPath),a((function(t){t.isPlayBack=+e.query.playback||0}));case 2:case"end":return s.stop()}}),s)})))()}},ke=be,Se=(a("0e16"),Object(P["a"])(ke,s,n,!1,null,null,null));t["default"]=Se.exports},"5e24":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var s=a("c7eb"),n=a("1da1"),o=a("dc21"),r=a("e39c"),i=function(){var e=Object(n["a"])(Object(s["a"])().mark((function e(t,a,n){var i,c,l;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=Object(r["h"])(),c=i.oversea,e.next=3,Object(o["a"])({url:a,params:n,apiDomain:c});case 3:return l=e.sent,e.abrupt("return",l);case 5:case"end":return e.stop()}}),e)})));return function(t,a,s){return e.apply(this,arguments)}}();function c(e,t){var a="/api/hub/classroom/student/preClassPrepare";return i(e,a,t)}},"6ce8":function(e,t,a){"use strict";a.d(t,"c",(function(){return u})),a.d(t,"d",(function(){return f})),a.d(t,"e",(function(){return p})),a.d(t,"f",(function(){return m})),a.d(t,"a",(function(){return h})),a.d(t,"b",(function(){return w}));var s=a("c7eb"),n=a("1da1"),o=a("dc21"),r=a("e39c"),i=a("d0db"),c=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"error";i["a"].send({tag:"http",level:s,content:{msg:e,err:t,interactType:"Redpacket",params:a}})};function l(e,t,a){return d.apply(this,arguments)}function d(){return d=Object(n["a"])(Object(s["a"])().mark((function e(t,a,n){var i,c,l;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=Object(r["h"])(),c=i.oversea,e.next=3,Object(o["a"])({url:a,params:n,apiDomain:c});case 3:return l=e.sent,e.abrupt("return",l);case 5:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function u(e,t){var a="/classroom-hub/redbag/student/grab";return l(e,a,t)}function f(e,t){var a="/classroom-hub/redbag/student/ranking";return l(e,a,t)}function p(e,t){var a="/classroom-hub/classroom/student/interact/partakereport";return l(e,a,t)}function m(e,t){var a="/api/redbagrain/student/reportStudentGetCoin";return l(e,a,t)}function h(e,t){var a="/api/redbagrain/student/getGamePackage";return l(e,a,t)}function w(e,t){return g.apply(this,arguments)}function g(){return g=Object(n["a"])(Object(s["a"])().mark((function e(t,a){var n,o,r,i;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="/api/redbagrain/student/status",e.next=3,l(t,n,a).catch((function(e){return c("接口报错:红包雨:",e,a),e}));case 3:if(o=e.sent,r=o.code,i=o.data,0!==+r){e.next=8;break}return e.abrupt("return",1===i.attendStatus);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}},"6e22":function(e,t,a){"use strict";a("374d")},"71b8":function(e,t,a){},"9e65":function(e,t){e.exports={functional:!0,render(e,t){const{_c:a,_v:s,data:n,children:o=[]}=t,{class:r,staticClass:i,style:c,staticStyle:l,attrs:d={},...u}=n;return a("svg",{class:[r,i],style:[c,l],attrs:Object.assign({width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg"},d),...u},o.concat([a("path",{attrs:{d:"M9 0a9 9 0 109 9 9 9 0 00-9-9zm4.314 6.62l-5.197 5.727a.714.714 0 01-1.125-.062L4.635 9.034a.714.714 0 01.113-.968l.208-.191a.714.714 0 01.984.05l1.519 1.581a.197.197 0 00.27 0l4.595-3.937a.714.714 0 01.996 1.024l-.006.028z",fill:"#FFAA0A","fill-rule":"evenodd"}})]))}}},a028:function(e,t,a){},a202:function(e,t,a){},aaf0:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{class:["error-wrapper",e.bgWhiteAuth?"bg-white":""]},[t("div",{staticClass:"center"},[t("div",{staticClass:"error-status"}),t("div",{staticClass:"message"},[t("div",{staticClass:"message-main"},[e._v(e._s(e.message))]),e.scene?t("p",{staticClass:"message-sub"},[e._v(" "+e._s("Scene: ".concat(e.scene,"."))+" "+e._s(e.subMessage)+" ")]):e._e()]),t("div",{staticClass:"button-wrapper"},[e.showRefresh?t("a-button",{class:e.showBack||e.isClassLiveOrPlayback?"mr40":"",attrs:{type:"primary",shape:"round",size:"large"},on:{click:e.handleRefresh}},[e._v(" "+e._s(e.$t("common.refresh"))+" ")]):e._e(),e.showBack||e.isClassLiveOrPlayback?t("a-button",{staticClass:"color-orange",attrs:{shape:"round",size:"large"},on:{click:e.handleBack}},[e._v(" "+e._s(e.isClassLiveOrPlayback?e.$t("classroom.modules.systemError.backButtonName"):e.$t("common.back"))+" ")]):e._e()],1)])])},n=[],o=(a("14d9"),a("caad"),a("9ca9")),r={name:"ErrorStatus",props:{message:{type:String,default:function(){return console.info("对象函数 default,filePath:renderer/components/Common/ErrorStatus.vue"),this.$t("common.components.errorStatus.message")}},isClassLiveOrPlayback:{type:Boolean,default:!1},scene:{type:String,default:""},subMessage:{type:String,default:""},showRefresh:{type:Boolean,default:!0},showBack:{type:Boolean,default:!1},backUrl:{type:String,default:""}},computed:{bgWhiteAuth:function(){return console.info("对象函数 bgWhiteAuth,filePath:renderer/components/Common/ErrorStatus.vue"),["ClassLiving","PlaybackReadyClass","LivingReadyClass","PlayBack"].includes(this.scene)}},methods:{handleRefresh:function(){console.info("对象函数 handleRefresh,filePath:renderer/components/Common/ErrorStatus.vue"),this.isClassLiveOrPlayback?window.location.reload():this.$emit("click-refresh")},handleBack:function(){console.info("对象函数 handleBack,filePath:renderer/components/Common/ErrorStatus.vue"),this.isClassLiveOrPlayback?Object(o["a"])("/#/courses"):this.$router.push({path:this.backUrl})}}},i=r,c=(a("4186"),a("2877")),l=Object(c["a"])(i,s,n,!1,null,"31fed01e",null);t["a"]=l.exports},b9da:function(e,t,a){"use strict";a("2ec5")},c02c:function(e,t,a){},c8d2:function(e,t,a){"use strict";var s=a("5e77").PROPER,n=a("d039"),o=a("5899"),r="​᠎";e.exports=function(e){return n((function(){return!!o[e]()||r[e]()!==r||s&&o[e].name!==e}))}},e315:function(e,t,a){"use strict";a("0f48")},e3c6:function(e,t,a){},f312:function(e,t,a){"use strict";a("c02c")},fc09:function(e,t,a){}}]);
//# sourceMappingURL=ReadyClass.fd9c4ae3.js.map