(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Feedback"],{"638e":function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return u}));var i=a("c7eb"),n=a("1da1"),s=a("dc21"),r=a("e39c"),o=function(){var e=Object(n["a"])(Object(i["a"])().mark((function e(t,a){var n,o,l;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Object(r["h"])(),o=n.one,e.next=3,Object(s["a"])({url:t,params:a,apiDomain:o});case 3:return l=e.sent,e.abrupt("return",l);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),l=function(){var e=Object(n["a"])(Object(i["a"])().mark((function e(t){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",o("/v1/feedback/submit",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(e){return o("/api/classroom/nps/getNPSStatus",e)},u=function(e){return o("/api/classroom/nps/saveNPS",e)}},"63e2":function(e,t,a){"use strict";a("b797")},"76ce":function(e,t,a){"use strict";a("bac4")},b797:function(e,t,a){},bac4:function(e,t,a){},bd12:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return e.show?t("div",{staticClass:"loading-wrapper",class:e.className,style:e.loadingStyle},[e._m(0)]):e._e()},n=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"loading-contenter"},[t("div",{staticClass:"loading-logo"},[t("img",{attrs:{src:a("c63e")}})]),t("div",{staticClass:"loading-animation"})])}],s={name:"Loading",props:{show:{default:!0,type:Boolean},size:{default:"default",type:String,validator:function(e){return console.info("对象函数 validator(value)",e,"filePath:renderer/components/Common/Loading.vue"),-1!==["small","default"].indexOf(e)}},marginTop:{default:"0",type:String},marginBottom:{default:"0",type:String}},computed:{className:function(){return console.info("对象函数 className,filePath:renderer/components/Common/Loading.vue"),"loading-".concat(this.size)},loadingStyle:function(){return console.info("对象函数 loadingStyle,filePath:renderer/components/Common/Loading.vue"),{marginTop:this.marginTop,marginBottom:this.marginBottom}}}},r=s,o=(a("f761"),a("2877")),l=Object(o["a"])(r,i,n,!1,null,"92d727e8",null);t["a"]=l.exports},c63e:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAA8UExURUdwTP/DL//DLv/BL//DLv/EL//DL//DLv/DL//CLv/DL//DL//CLf/DL//DL//DL//DLv/DL//DMv/DMGSQIxsAAAATdFJOUwDwcSTeYM1AwICojww0SLNSmhsrwQ8LAAABI0lEQVRYw+3X2a6DIBCAYbaBYXXh/d/1aE3UxtbjMhdtOv+l6BeiiYAQ5+tzLwhK2oGKjTW1Vn/HyQV8NzlzF8HRkfVV10BX38Ygg18FptICKB+70OAWDD4GNPIMaJentyAuv4l8FKx7IIjYdB7a3CdBArplWFoMUYHTiQhcZdDTgqt3yyCDdgTlkBmy1iLeBIcJ7Q6fB2txzpGCYwz+HuhWAR4BcR98LhwAU6vGlXIDaruZexBwAJy35dN2WtadNX++iESbiK8BDRYyULWXT0AvwTsxyCCDnwJaUhAjaCrQBFWSuNsESoytFiRpYzqVxc/kh0Mipaemj2tDHE62iWKCh7daDDLI4CeDhRoUPXSWFHysASpIUnAsK6QFp+Pjf3f8AVRMjNs7xw9TAAAAAElFTkSuQmCC"},d14a:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"feedback-wrapper"},[t("div",{staticClass:"feedback-information-contenter"},[[e.isLoading?t("Loading",{attrs:{"margin-top":"200px"}}):t("div",{staticClass:"feedback-information-wrapper"},[t("div",{staticClass:"userinfo-contenter"},[t("div",{staticClass:"problem-wrapper"},[t("div",{staticClass:"title"},[e._v(e._s(e.$t("setting.feedback.title")))]),t("section",{staticClass:"problems"},[e._l(e.$t("setting.feedback.problemDescriptors"),(function(a,i){return[t("div",{key:i,staticClass:"item",class:a==e.feedbackProblem?"problem_active":"",on:{click:function(t){return e.handleChooseProblem(a)}}},[e._v(" "+e._s(a)+" ")])]}))],2),t("a-form-model",{ref:"proInfoForm",attrs:{model:e.problemForm,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[t("a-form-model-item",{attrs:{prop:"desc"}},[t("a-input",{staticClass:"inputProblem",attrs:{"auto-size":{minRows:8,maxRows:8},maxLength:"500",type:"textarea",placeholder:e.$t("setting.feedback.feedBackInput")},model:{value:e.problemForm.desc,callback:function(t){e.$set(e.problemForm,"desc",t)},expression:"problemForm.desc"}})],1)],1)],1),t("div",{staticClass:"upload-wrapper"},[t("div",{staticClass:"title"},[t("span",[e._v(e._s(e.$t("setting.feedback.images")))]),t("span",[e._v(e._s(e.$t("setting.feedback.optional")))])]),t("section",[t("Upload",{attrs:{uploadAccept:e.uploadAccept,maxFileSize:e.maxFileSize,maxFileNumber:e.maxFileNumber},on:{handleImageFile:e.handleImageFile,removeImageFile:e.removeImageFile}})],1)])]),t("div",{staticClass:"userinfo-footer"},[t("div",{staticClass:"goback",on:{click:e.handleBack}},[t("a-icon",{attrs:{type:"caret-left"}}),e._v(" "+e._s(e.$t("setting.feedback.backToCourses"))+" ")],1),e.feedbackProblem?t("div",{staticClass:"button-group"},[t("a-button",{attrs:{size:"large",type:"primary",shape:"round",loading:e.isSubmit},on:{click:e.handleSubmit}},[e._v(" "+e._s(e.$t("setting.feedback.submit"))+" ")])],1):t("div",{staticClass:"button-limit"},[t("a-button",{attrs:{size:"large",type:"primary",disabled:"",shape:"round"}},[e._v(" "+e._s(e.$t("setting.feedback.submit"))+" ")])],1)])])]],2)])},n=[],s=(a("4de4"),a("d3b7"),a("14d9"),a("ff07")),r=a.n(s),o=a("bd12"),l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"uploadFile"},[t("a-upload",{attrs:{"list-type":"picture-card","file-list":e.fileList,accept:e.uploadAccept,remove:e.removeUploadFile,multiple:!1,beforeUpload:e.beforeUpload,customRequest:e.customRequest},on:{preview:e.handlePreview,change:e.handleChange}},[!e.isUploading&&e.fileList.length<3?t("div",{staticClass:"input_icon upload"}):e._e(),e.isUploading&&e.fileList.length<3?t("div",{staticClass:"uploading"},[t("a-icon",{attrs:{type:"loading"}}),t("span",[e._v(e._s(e.$t("common.uploading"))+"...")])],1):e._e()]),e.fileList.length<2?t("span",{staticClass:"maxmum"},[e._v(" "+e._s(e.$t("setting.feedback.maximuImages",{num:3}))+" ")]):e._e(),t("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[t("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1)},c=[],u=a("c7eb"),d=a("1da1"),m=(a("e6cf"),a("a9e3"),a("b0c0"),a("fb6a"),a("1a37"));function f(e){return console.info("函数申明 getBase64(file)",e,"filePath:renderer/components/Common/Upload.vue"),new Promise((function(t,a){var i=new FileReader;i.readAsDataURL(e),i.onload=function(){return t(i.result)},i.onerror=function(e){return a(e)}}))}var p={data:function(){return{previewVisible:!1,previewImage:"",fileList:[],isUploading:!1,imgUrl:"",fileUid:-1}},props:{uploadAccept:{type:String,default:function(){return".jpg,.jpeg,.png"}},maxFileSize:{type:Number,default:function(){return 10485760}},maxFileNumber:{type:Number,default:function(){return 3}}},methods:{handleCancel:function(){console.info("对象函数 handleCancel,filePath:renderer/components/Common/Upload.vue"),this.previewVisible=!1},handlePreview:function(e){var t=this;return Object(d["a"])(Object(u["a"])().mark((function a(){return Object(u["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(console.info("对象函数 handlePreview(file)",e,"filePath:renderer/components/Common/Upload.vue"),e.url||e.preview){a.next=5;break}return a.next=4,f(e.originFileObj);case 4:e.preview=a.sent;case 5:t.previewImage=e.url||e.preview,t.previewVisible=!0;case 7:case"end":return a.stop()}}),a)})))()},beforeUpload:function(e){var t=this;console.info("对象函数 beforeUpload(file)",e,"filePath:renderer/components/Common/Upload.vue");var a=this.uploadAccept.split(","),i=e.name.lastIndexOf("."),n=e.name.substr(i+1),s=a.some((function(e){return e.slice(1)===n}));return new Promise((function(a,i){e.size>t.maxFileSize?(t.$Message.warning(t.$t("setting.feedback.maxFileSize")),i(e)):s?(a(e),t.isUploading=!0):(t.$Message.warning(t.$t("setting.feedback.fileFormatIncorrect")),i(e))}))},removeUploadFile:function(e){var t=this;console.info("对象函数 removeUploadFile(file)",e,"filePath:renderer/components/Common/Upload.vue"),this.fileList=this.fileList.filter((function(a){return a.uid==e.uid&&t.$emit("removeImageFile",a.url),a.uid!==e.uid}))},customRequest:function(e){var t=this;return Object(d["a"])(Object(u["a"])().mark((function a(){var i;return Object(u["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:console.info("对象函数 customRequest(param)",e,"filePath:renderer/components/Common/Upload.vue"),i=new m["b"]({scene:"feedback"}),i.putFile({filePath:"feedback.jpg",file:e.file,success:function(e){if(t.fileList.length>=t.maxFileNumber)return t.$Message.warning(t.$t("setting.feedback.maximuImages",{num:t.maxFileNumber})),!1;t.fileList.push({uid:t.fileUid--,status:"done",url:e.url}),t.$emit("handleImageFile",e.url),t.isUploading=!1},fail:function(){t.isUploading=!1,t.$Message.warning(t.$t("setting.feedback.uploadFailTryAgain"))}});case 3:case"end":return a.stop()}}),a)})))()}}},b=p,v=(a("76ce"),a("2877")),g=Object(v["a"])(b,l,c,!1,null,"13cb35d4",null),h=g.exports,w=a("638e"),A={name:"Feedback",components:{Loading:o["a"],Upload:h},data:function(){return{arrowBottomSvg:r.a,isSubmit:!1,feedbackProblem:"",labelCol:{span:24},wrapperCol:{span:24},problemForm:{desc:""},uploadAccept:".jpg,.jpeg,.png",maxFileSize:10485760,maxFileNumber:3,submitParams:{images:[]},rules:{desc:[{required:!0,message:this.$t("setting.feedback.inputInvilidate"),trigger:"blur"}]}}},mounted:function(){this.updateHeaderAttr()},methods:{updateHeaderAttr:function(){console.info("对象函数 updateHeaderAttr,filePath:renderer/views/Feedback.vue"),this.$bus.$emit("updateHeaderAttr",{title:this.$t("setting.feedback.title"),showGoback:!0,backUrl:"/courses"})},handleBack:function(){console.info("对象函数 handleBack,filePath:renderer/views/Feedback.vue"),this.$router.push("/courses")},handleChooseProblem:function(e){console.info("对象函数 handleChooseProblem(problem)",e,"filePath:renderer/views/Feedback.vue"),e!=this.feedbackProblem?this.feedbackProblem=e:this.feedbackProblem=""},handleSubmit:function(){var e=this;console.info("对象函数 handleSubmit,filePath:renderer/views/Feedback.vue"),this.$refs.proInfoForm.validate((function(t){if(console.info("箭头函数 validate(valid)",t,"filePath:renderer/views/Feedback.vue"),!t)return!1;e.isSubmit=!0,e.submitParams.tag=e.feedbackProblem,e.submitParams.details=e.problemForm.desc,e.submitParams.deviceId="",Object(w["b"])(e.submitParams).then((function(t){if(console.info("箭头函数 submitFeedback的then(res)",t,"filePath:renderer/views/Feedback.vue"),!t||0!=t.code)return e.$Message.error(e.$t("common.submissionFailed")),void(e.isSubmit=!1);e.$Message.success(e.$t("common.sumbittedSuccessfully")),e.isSubmit=!1,setTimeout((function(){e.handleBack()}),2e3)}))}))},handleImageFile:function(e){console.info("对象函数 handleImageFile(url)",e,"filePath:renderer/views/Feedback.vue"),this.submitParams.images.push(e)},removeImageFile:function(e){console.info("对象函数 removeImageFile(url)",e,"filePath:renderer/views/Feedback.vue"),this.submitParams.images=this.submitParams.images.filter((function(t){return t!=e}))}},watch:{"$i18n.locale":function(e){e&&this.updateHeaderAttr()}}},C=A,k=(a("63e2"),Object(v["a"])(C,i,n,!1,null,"2e7249e0",null));t["default"]=k.exports},ebc2:function(e,t,a){},f761:function(e,t,a){"use strict";a("ebc2")},ff07:function(e,t){e.exports={functional:!0,render(e,t){const{_c:a,_v:i,data:n,children:s=[]}=t,{class:r,staticClass:o,style:l,staticStyle:c,attrs:u={},...d}=n;return a("svg",{class:["icon",r,o],style:[l,c],attrs:Object.assign({viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"128",height:"128"},u),...d},s.concat([a("defs"),a("path",{attrs:{d:"M464.6 736C346 613.3 227.3 490.5 108.8 367.8c-48.9-50.5 30.5-125.9 79.5-75.1C293.9 401.9 399.4 511.2 505 620.3 614.2 510.6 723.6 400.8 832.8 291c49.7-50 129.1 25.4 79.5 75.2C789.6 489.5 666.9 612.7 544.2 736c-20.4 20.4-59.4 20.9-79.6 0z"}})]))}}}}]);
//# sourceMappingURL=Feedback.7e873644.js.map