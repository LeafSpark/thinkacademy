(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33b85116"],{"230e":function(e,t,n){"use strict";var o=n("8bbf"),a=n.n(o),i=function(){var e=this,t=e._self._c;return t("transition",{on:{"after-leave":e.handleAfterLeave}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"ne-tips",attrs:{id:"toast_"+e.uuid}},[t("div",{staticClass:"ne-tips__content"},[e.msg?t("p",{staticClass:"ne-tips__content--text",domProps:{textContent:e._s(e.msg)}}):e._e()])])])},r=[],s=(n("d3b7"),n("25f0"),n("a9e3"),{name:"NeTips",data:function(){return{uuid:Math.random().toString(36).substring(3,20)}},props:{msg:{type:[String,Number],default:""},duration:{type:Number,default:3e3},callback:Function,visible:Boolean},beforeDestroy:function(){console.info("对象函数 beforeDestroy,filePath:renderer/components/Classroom/CommonInteractions/collectiveSpeech/components/tips/main.vue"),this.$_timer&&clearTimeout(this.$_timer),this.visible&&this.closeTips()},methods:{handleAfterLeave:function(){var e;console.info("对象函数 handleAfterLeave,filePath:renderer/components/Classroom/CommonInteractions/collectiveSpeech/components/tips/main.vue"),this.$destroy(!0),null===(e=this.$el)||void 0===e||null===(e=e.parentNode)||void 0===e||e.removeChild(this.$el),"function"==typeof this.callback&&this.callback()},fire:function(){var e=this;console.info("对象函数 fire,filePath:renderer/components/Classroom/CommonInteractions/collectiveSpeech/components/tips/main.vue"),this.$_timer&&clearTimeout(this.$_timer),this.visible&&this.duration>0&&(this.$_timer=setTimeout((function(){e.closeTips()}),this.duration))},showTips:function(){console.info("对象函数 showTips,filePath:renderer/components/Classroom/CommonInteractions/collectiveSpeech/components/tips/main.vue"),this.visible=!0,this.fire()},closeTips:function(){console.info("对象函数 closeTips,filePath:renderer/components/Classroom/CommonInteractions/collectiveSpeech/components/tips/main.vue"),this.visible=!1,this.handleAfterLeave()}}}),c=s,l=(n("e80a"),n("2877")),d=Object(l["a"])(c,i,r,!1,null,"7ff65c7c",null),u=d.exports,p=function e(t){var n=t.msg,o=void 0===n?"":n,i=t.duration,r=void 0===i?3e3:i,s=t.callback,c=void 0===s?null:s,l=t.parentNode,d=void 0===l?document.getElementById("collectiveSpeechContainer"):l;console.info("箭头函数 Tips(msg, duration, callback, parentNode)",o,r,c,d,"filePath:renderer/components/Classroom/CommonInteractions/collectiveSpeech/components/tips/index.js");var p=e._instance,m=a.a.extend(u);return p=e._instance=new m({propsData:{msg:o,duration:r,callback:c}}).$mount(),p.$el.parentNode||d.appendChild(p.$el),p.msg=o,p.duration=r,p.callback=c,p.showTips(),p};p._instance=null,p.close=function(){var e=a.a.extend(u);p._instance instanceof e&&p._instance.visible&&p._instance.closeTips()},p.tips=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return p({msg:e,duration:t,callback:n})},p.component=u;t["a"]=p},"27ff":function(e,t,n){"use strict";n("bf57")},"5afe":function(e,t,n){},"8e82":function(e,t,n){e.exports=n.p+"static/media/show-red-package.b0ec20b3.mp3"},9151:function(e,t,n){"use strict";var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"coin",style:e.coinStyle},[t("div",{staticClass:"top1",style:e.targetStyle,on:{animationend:e.addCoinStart}}),t("div",{staticClass:"top2",style:e.targetStyle}),t("div",{staticClass:"top3",style:e.targetStyle}),t("div",{staticClass:"mid1",style:e.targetStyle}),t("div",{staticClass:"mid2",style:e.targetStyle}),t("div",{staticClass:"mid3",style:e.targetStyle}),t("div",{staticClass:"bottom1",style:e.targetStyle}),t("div",{staticClass:"bottom2",style:e.targetStyle}),t("div",{staticClass:"bottom3",style:e.targetStyle})])},a=[],i=(n("a9e3"),n("caad"),n("2532"),{props:{x:{type:Number,default:0},y:{type:Number,default:0},coin:{type:Number,default:0}},computed:{coinStyle:function(){return console.info("对象函数 coinStyle,filePath:renderer/components/Classroom/CommonInteractions/redPacket/Coin.vue"),{left:"".concat(this.x,"px"),top:"".concat(this.y,"px")}},getTarget:function(){if(console.info("对象函数 getTarget,filePath:renderer/components/Classroom/CommonInteractions/redPacket/Coin.vue"),location.pathname.includes("largeClass.html")){var e=document.querySelector(".achievement-container .coins-icon");if(e)return{left:e.left,top:e.top,height:26,width:26};var t=document.querySelector(".video-local").getBoundingClientRect(),n=t.left,o=t.top;return{left:n,top:o,height:22,width:22}}return document.querySelector(".icon-coins").getBoundingClientRect()},targetX:function(){console.info("对象函数 targetX,filePath:renderer/components/Classroom/CommonInteractions/redPacket/Coin.vue");var e=this.getTarget,t=e.left,n=e.width;return t-this.x-n/2},targetY:function(){console.info("对象函数 targetY,filePath:renderer/components/Classroom/CommonInteractions/redPacket/Coin.vue");var e=this.getTarget,t=e.top,n=e.height;return this.y-t+n/2}},data:function(){return{targetStyle:{}}},methods:{addCoinStart:function(){console.info("对象函数 addCoinStart,filePath:renderer/components/Classroom/CommonInteractions/redPacket/Coin.vue"),this.$bus.$emit("addCoin",!0,this.coin)}},watch:{x:function(e){console.info("对象函数 x(val)",e,"filePath:renderer/components/Classroom/CommonInteractions/redPacket/Coin.vue"),e&&(this.targetStyle={left:"".concat(this.targetX,"px"),bottom:"".concat(this.targetY,"px")})}}}),r=i,s=(n("ab09"),n("2877")),c=Object(s["a"])(r,o,a,!1,null,"5d63d60b",null);t["a"]=c.exports},9571:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return x}));var o=n("5530"),a=n("d4ec"),i=n("bee2"),r=n("262e"),s=n("2caf"),c=n("b6c9"),l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"red-package-wrapper",attrs:{"data-log":"均等红包wrapper"}},[t("audio",{ref:"showRedMus",staticClass:"hiden",attrs:{src:n("8e82")}}),t("audio",{ref:"getCoinMus",staticClass:"hiden",attrs:{src:n("ebcc")}}),t("audio",{ref:"equlCoinFly",staticClass:"hidden",attrs:{src:n("f5b3")}}),"open"==e.redPackageStep?t("div",{staticClass:"equal-red-open",attrs:{"data-log":"红包open"}},[t("transition",{attrs:{name:"slide-bg",appear:""}},["large"==e.redPackageShowStatus?t("div",{staticClass:"red",attrs:{"data-log":"大红包"}},[t("div",{style:Object(o["a"])({position:"absolute",width:"".concat(e.getEqualRedWidth,"px"),height:"".concat(e.getEqualRedWidth,"px")},e.getEqualRedMargin),on:{click:function(t){return e.openRedPackage(1)}}},[t("lottie-player",{attrs:{mode:"normal",autoplay:"",src:"./lottiefiles/redPacket/weidakai.json"}})],1)]):e._e()]),"small"==e.redPackageShowStatus?t("div",{staticClass:"red-small",attrs:{"data-log":"小红包"},on:{click:function(t){return e.openRedPackage(0)}}}):e._e()],1):e._e(),t("transition",{attrs:{name:"slide-bg",appear:""}},["opened"==e.redPackageStep&&e.redResultType?t("div",{staticClass:"get-red-result",class:[e.redResultType],attrs:{"data-log":"红包opened"}},[t("div",{style:Object(o["a"])({position:"absolute",width:"".concat(e.getEqualRedWidth,"px"),height:"".concat(e.getEqualRedWidth,"px")},e.getEqualRedMargin)},[t("lottie-player",{attrs:{mode:"normal",autoplay:"",src:"./lottiefiles/redPacket/dakaihou.json"}})],1),e.resultTips[e.redResultType]?t("div",{staticClass:"red-result"},[e._v(" "+e._s(e.resultTips[e.redResultType])+" ")]):e._e(),t("div",{staticClass:"red-tips",domProps:{innerHTML:e._s(e.tips[e.redResultType])}}),t("div",{staticClass:"close-red-package",on:{click:e.closeRedPackage}},[t("i",{staticClass:"icon-close-red-package"})])]):e._e()]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.equalCoinShow,expression:"equalCoinShow"}],staticClass:"mask",style:{zIndex:999}},[t("div",{ref:"equalCoin",staticClass:"equal-red-pot",style:Object(o["a"])({zIndex:1e3,width:"".concat(e.getCoinWidth,"px"),height:"".concat(e.getCoinHeight,"px")},e.getCoinMargin)},[t("lottie-player",{attrs:{id:"equlCoinPlay",mode:"normal",src:"./lottiefiles/redRain/coin/index.json"},on:{complete:e.onEqualCoinLottieComplete}})],1),t("Coin",{attrs:{x:e.equalCoinX,y:e.equalCoinY,coin:e.curAddCoin}})],1)],1)},d=[],u=n("c7eb"),p=n("1da1"),m=(n("caad"),n("2532"),n("4de4"),n("d3b7"),n("6ce8")),h=n("dbc1"),f=n("d0db"),g=n("e417"),v=(n("a717"),n("9151")),b=n("612a"),C=n("c02a"),k=n("b047"),P=n.n(k),w={components:{Coin:v["a"]},props:{options:{type:Object,default:function(){return{ircMsg:{},roomMessage:{roomInfo:{commonOption:{}}}}}}},computed:{containerSize:function(){return console.info("对象函数 containerSize,filePath:renderer/components/Classroom/CommonInteractions/redPacket/app.vue"),location.pathname.includes("largeClass.html")?(this.containerDom||this.setCoursewareAdaptation(),{width:this.containerDom.offsetWidth,height:this.containerDom.offsetHeight}):{width:b["a"].state.smallClass.coursesPosition.width,height:b["a"].state.smallClass.coursesPosition.height}},getEqualRedMargin:function(){return console.info("对象函数 getEqualRedMargin,filePath:renderer/components/Classroom/CommonInteractions/redPacket/app.vue"),{top:"".concat((this.containerSize.height-this.getEqualRedWidth)/2,"px"),left:"".concat((this.containerSize.width-this.getEqualRedWidth)/2,"px")}},getEqualRedWidth:function(){return console.info("对象函数 getEqualRedWidth,filePath:renderer/components/Classroom/CommonInteractions/redPacket/app.vue"),.4718*this.containerSize.width},getCoinWidth:function(){console.info("对象函数 getCoinWidth,filePath:renderer/components/Classroom/CommonInteractions/redPacket/app.vue");var e=this.containerSize.width/this.containerSize.height;if(e>1.046){var t=229/572*this.containerSize.height;return 1.046*t}var n=240/763*this.containerSize.width;return n/1.046},getCoinHeight:function(){return console.info("对象函数 getCoinHeight,filePath:renderer/components/Classroom/CommonInteractions/redPacket/app.vue"),this.getCoinWidth/1.046},getCoinMargin:function(){return console.info("对象函数 getCoinMargin,filePath:renderer/components/Classroom/CommonInteractions/redPacket/app.vue"),{top:"".concat((this.containerSize.height-this.getCoinHeight)/2,"px"),left:"".concat((this.containerSize.width-this.getCoinWidth)/2,"px")}}},mounted:function(){var e=this;return Object(p["a"])(Object(u["a"])().mark((function t(){return Object(u["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$nextTick((function(){e.userTrackLogger("普通红包启动"),e.initAqual(),location.pathname.includes("largeClass.html")&&window.addEventListener("resize",e.setCoursewareAdaptation)}));case 1:case"end":return t.stop()}}),t)})))()},destroyed:function(){console.info("对象函数 destroyed,filePath:renderer/components/Classroom/CommonInteractions/redPacket/app.vue"),this.userTrackLogger("普通红包结束"),this.closeRedPackage(),location.pathname.includes("largeClass.html")&&window.removeEventListener("resize",this.setCoursewareAdaptation)},data:function(){var e=this.options.roomMessage.roomInfo.stuInfo.id,t=this.options.roomMessage.roomInfo.commonOption.planId,n=this.options.roomMessage.roomInfo.commonOption.classId,o=this.options.ircMsg.interactId||this.options.ircMsg.redPacket.interactId,a=this.$t("classroom.interactions.redPacket.oopsRedNotice"),i=this.$t("classroom.interactions.redPacket.congrats");return{equalCoinShow:!1,equalCoinX:0,equalCoinY:0,redPackageStep:"",redPackageShowStatus:"large",redResultType:"",currentStudentId:e,isPlayBack:this.options.roomMessage.roomInfo.isPlayBack,currentStuInfo:{},params:{classId:n,planId:t,interactId:o},redResult:{redbagNum:100,grabNum:10,list:[{userId:101,coin:10}]},curAddCoin:0,resultTips:{"congrats-red":i,"oops-red":"Oops~"},tips:{"congrats-red":"","oops-red":'<p class="has-get-coin">'.concat(a,"</p>")},timer:0,isRedGrabing:!1,disapperTime:35e3,containerDom:null}},methods:{setCoursewareAdaptation:P()((function(){var e=document.getElementById("interactionController");this.containerDom={offsetWidth:e.offsetWidth,offsetHeight:e.offsetHeight}}),300,{leading:!0}),initAqual:function(){console.info("对象函数 initAqual,filePath:renderer/components/Classroom/CommonInteractions/redPacket/app.vue"),this.getstudentRedBagStatus(),this.onOpenSendData()},onOpenSendData:function(){var e=this;return Object(p["a"])(Object(u["a"])().mark((function t(){var n,o,a,i,r,s;return Object(u["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.info("对象函数 onOpenSendData,filePath:renderer/components/Classroom/CommonInteractions/redPacket/app.vue"),n=e.options.roomMessage.roomInfo.commonOption,o=n.planId,a=n.classId,i=e.options.ircMsg.interactId,r={planId:o,classId:a,interactId:i},t.next=6,Object(m["e"])(e,r);case 6:s=t.sent,0==s.code&&console.log(s,"上报数据成功"),e.sendLogger("上报数据成功");case 9:case"end":return t.stop()}}),t)})))()},disapperRedPacket:function(){var e=this;console.info("对象函数 disapperRedPacket,filePath:renderer/components/Classroom/CommonInteractions/redPacket/app.vue"),this.timer=setTimeout((function(){"open"==e.redPackageStep&&(e.sendLogger("超出时间".concat(e.disapperTime,"未点击，删除红包状态")),e.closeRedPackage())}),this.disapperTime)},getstudentRedBagStatus:function(){var e=this;return Object(p["a"])(Object(u["a"])().mark((function t(){var n;return Object(u["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.info("对象函数 getstudentRedBagStatus,filePath:renderer/components/Classroom/CommonInteractions/redPacket/app.vue"),t.next=3,Object(h["b"])();case 3:if(n=t.sent,e.sendLogger("初始化红包出现判断红包状态".concat(JSON.stringify(n))),e.isPlayBack){t.next=12;break}if(!n||!n.id||n.id!==e.options.ircMsg.interactId){t.next=8;break}return t.abrupt("return",!1);case 8:return t.next=10,Object(h["d"])(e.options.ircMsg.interactId);case 10:return e.openRedPackageOp(),t.abrupt("return",!1);case 12:case"end":return t.stop()}}),t)})))()},openRedPackageOp:function(){var e=this;console.info("对象函数 openRedPackageOp,filePath:renderer/components/Classroom/CommonInteractions/redPacket/app.vue"),this.sendLogger("显示红包"),this.redPackageStep="open",this.$nextTick((function(){e.$refs.showRedMus.play()})),this.disapperRedPacket(),setTimeout((function(){e.sendLogger("缩略小红包"),e.redPackageShowStatus="small"}),5e3)},openRedPackage:function(e){var t=this;return Object(p["a"])(Object(u["a"])().mark((function n(){var o,a;return Object(u["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.info("对象函数 openRedPackage(clickButton)",e,"filePath:renderer/components/Classroom/CommonInteractions/redPacket/app.vue"),t.curAddCoin=0,Object(g["e"])("hw_classroom_interact_red_packet_click",t.options.roomMessage.roomInfo.commonOption,{interact_id:t.options.ircMsg.interactId,click_button:e}),t.sendLogger("点击".concat(1===e?"大":"小","红包")),!t.isRedGrabing){n.next=6;break}return n.abrupt("return",!1);case 6:return t.isRedGrabing=!0,n.next=9,Object(m["c"])(t,t.params);case 9:if(a=n.sent,C["n"](null===(o=t.options)||void 0===o||null===(o=o.ircMsg)||void 0===o?void 0:o.interactId,a),t.isRedGrabing=!1,t.sendLogger("抢红包结果, res: ".concat(JSON.stringify(a))),41001!=a.code){n.next=17;break}return t.redPackageStep="opened",t.redResultType="oops-red",n.abrupt("return",!1);case 17:if(0==a.code){n.next=20;break}return t.$Message.warn(a.msg),n.abrupt("return");case 20:t.redPackageStep="opened",a.data.coin&&(t.redResultType="congrats-red",t.tips["congrats-red"]="<p><span class='get-coin'>+".concat(a.data.coin,"</span></p>"),t.$refs.getCoinMus&&t.$refs.getCoinMus.play(),t.curAddCoin=a.data.coin),clearTimeout(t.timer),t.timer=setTimeout((function(){t.closeRedPackage()}),5e3);case 24:case"end":return n.stop()}}),n)})))()},checkResults:function(){var e=this;return Object(p["a"])(Object(u["a"])().mark((function t(){var n;return Object(u["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.info("对象函数 checkResults,filePath:renderer/components/Classroom/CommonInteractions/redPacket/app.vue"),t.next=3,Object(m["d"])(e,e.params);case 3:if(n=t.sent,0==n.code){t.next=7;break}return e.$Message.info(n.msg),t.abrupt("return");case 7:e.redPackageStep="showResult",e.redResult.redbagNum=n.data.redbagNum,e.redResult.grabNum=n.data.grabNum,e.redResult.list=n.data.list,e.currentStuInfo=n.data.list.filter((function(t){if(t.userId===e.currentStudentId)return t})),e.currentStuInfo=e.currentStuInfo[0];case 13:case"end":return t.stop()}}),t)})))()},onEqualCoinLottieComplete:function(){console.info("对象函数 onEqualCoinLottieComplete,filePath:renderer/components/Classroom/CommonInteractions/redPacket/app.vue"),this.equalCoinShow=!1,this.curAddCoin=0,this.equalCoinX=0,this.equalCoinY=0},closeRedPackage:function(){var e,t,n=this;(console.info("对象函数 closeRedPackage,filePath:renderer/components/Classroom/CommonInteractions/redPacket/app.vue"),"opened"===this.redPackageStep&&this.curAddCoin)&&(this.equalCoinShow=!0,null===(e=this.$refs)||void 0===e||null===(e=e.equlCoinFly)||void 0===e||e.play(),null===(t=document.getElementById("equlCoinPlay"))||void 0===t||t.play(),this.$nextTick((function(){var e,t=null===(e=n.$refs)||void 0===e||null===(e=e.equalCoin)||void 0===e?void 0:e.getBoundingClientRect(),o=t.left,a=t.top,i=t.width,r=t.height;n.equalCoinX=o+(i-59)/2,n.equalCoinY=a+(r-59)/2})));this.sendLogger("点击关闭红包"),this.timer&&clearTimeout(this.timer),this.redPackageStep=""},sendLogger:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};f["a"].send({tag:"student.Interact",level:t,content:Object(o["a"])({msg:e,interactType:"Redpacket",interactId:this.options.ircMsg.interactId},n)})},userTrackLogger:function(e){console.info("对象函数 userTrackLogger(msg)",e,"filePath:renderer/components/Classroom/CommonInteractions/redPacket/app.vue"),f["a"].send({tag:"userTrack",content:{msg:e,tag:"student.Interact",interactType:"Redpacket"}})}}},y=w,I=(n("27ff"),n("2877")),S=Object(I["a"])(y,l,d,!1,null,null,null),O=S.exports,x=(n("3898"),n("230e"),function(e){Object(r["a"])(n,e);var t=Object(s["a"])(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return console.info("函数申明 RedPacket(opts)",o,"filePath:renderer/components/Classroom/CommonInteractions/redPacket/index.js"),Object(a["a"])(this,n),e=t.call(this,O),e.options=o,e.dom=o.roomMessage.roomInfo.interactionController,e.initVmApp("红包"),e}return Object(i["a"])(n,[{key:"createPropsData",value:function(){var e={};return Object(o["a"])({options:this.options},e)}},{key:"clear",value:function(){this.sendLogger("销毁互动"),this.vm.$destroy(),this.dom.innerHTML="",this.vm=null,this.app=null}},{key:"destroy",value:function(){}},{key:"sendLogger",value:function(e){f["a"].send({tag:"student.Interact",content:{msg:e,interactType:"Redpacket",interactId:this.options.ircMsg.interactId}})}}]),n}(c["a"]))},ab09:function(e,t,n){"use strict";n("5afe")},b6c9:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var o=n("d4ec"),a=n("bee2"),i=(n("99af"),n("d9e2"),n("8bbf")),r=n.n(i),s=n("3898"),c=n("d0db"),l=function(){function e(t){console.info("函数申明 InteractionBase(app)",t,"filePath:renderer/components/Classroom/CommonInteractions/interaction-base.js"),Object(o["a"])(this,e),this.app=t,this.vm=null,this.keepOtherDom=!1}return Object(a["a"])(e,[{key:"initVmApp",value:function(e){if(!this.dom)throw Error("互动的dom容器不存在");this.dom.children.length>0&&!this.keepOtherDom&&(c["a"].send({tag:"tempInteractionTest",content:{msg:"清空互动容器，由".concat(e,"触发清空，清空").concat(this.dom.children[0].className)}}),this.dom.innerHTML=""),this.vm=this.initVm(this.app),this.render(this.dom,this.vm)}},{key:"initVm",value:function(e){var t=r.a.extend(e),n=this.createPropsData(),o=new t({i18n:s["b"],propsData:n,store:this.store||{}});return o.$mount(),o}},{key:"render",value:function(e,t){e.appendChild(t.$el)}},{key:"destroy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.submit,n=e.key,o=void 0===n?"":n;if(this.vm){var a,i;if(t&&this.vm.submit(),this.vm.$destroy(),"classRest"===o)null===this||void 0===this||null===(a=this.dom)||void 0===a||a.removeChild(null===this||void 0===this||null===(i=this.vm)||void 0===i?void 0:i.$el);else this.dom.innerHTML="";this.vm=null,this.app=null}}},{key:"getProperties",value:function(e,t){return e["".concat(t)].properties}},{key:"handleMsg",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log(e)}}]),e}()},bf57:function(e,t,n){},dbc1:function(e,t,n){"use strict";n.d(t,"d",(function(){return C})),n.d(t,"b",(function(){return k})),n.d(t,"c",(function(){return P})),n.d(t,"a",(function(){return w}));var o=n("5530"),a=n("c7eb"),i=n("1da1"),r=(n("b64b"),n("fb6a"),n("99af"),n("0d52")),s=n("92e5"),c=n("6ce8"),l=n("e39c"),d=n("9b0f"),u=n("a32b"),p=n("d0db"),m=n("8bbf"),h=n.n(m),f=void 0,g=null,v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"error";p["a"].send({tag:"http",level:o,content:{msg:e,err:t,interactType:"Redpacket",params:n}})},b=function(){return Object(u["join"])(r["downloaderApi"].appUserDataPath,"courseware")},C=function(){var e=Object(i["a"])(Object(a["a"])().mark((function e(t){var n,o;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["a"])();case 2:return n=e.sent,o=n.unifiedAccessToken,e.next=6,window.thinkApi.ipc.invoke("setStoreValue","red_packet_interaction_info",{id:t,unifiedAccessToken:o});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(i["a"])(Object(a["a"])().mark((function e(){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,window.thinkApi.ipc.invoke("getStoreValue","red_packet_interaction_info");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(i["a"])(Object(a["a"])().mark((function e(){var t,n,i,s,m,C,k,P,w;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("redPacketRainReportError"),!t){e.next=20;break}return e.prev=2,t=JSON.parse(t),e.next=6,Object(c["b"])({interactId:t.interactId,planId:t.planId,userId:t.userId});case 6:if(n=e.sent,!n){e.next=11;break}localStorage.setItem("redPacketRainReportError",""),e.next=15;break;case 11:return e.next=13,Object(c["f"])(f,t);case 13:i=e.sent,0===i.code&&localStorage.setItem("redPacketRainReportError","");case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](2),console.error("[红包]json解析error",e.t0);case 20:return e.next=22,Object(c["a"])().catch((function(e){return v("红包雨接口报错:",e),e}));case 22:if(s=e.sent,m=s.code,C=s.data.redbagrainPackage,0===+m){e.next=27;break}return e.abrupt("return");case 27:g=C,k=Object(l["i"])(g.offlineZipPath),P=b(),Object(d["existsSync"])(Object(u["join"])(P,k))||(w={url:C.offlineZipPath,packageSize:C.offlineZipSize,packageMd5:C.offlineZipMd5},r["downloaderApi"].downloadCourseware({timeout:2e3,fileURL:C.offlineZipPath,fileMD5:C.offlineZipMd5,start:function(e){console.log("红包雨游戏课件下载开始:",e)},progress:function(e){console.log("红包雨游戏课件下载进度:",e)},complete:function(e){console.log("红包雨游戏downloadCourseware课件下载完成:",e),p["a"].send({tag:"coursewareDownload",content:Object(o["a"])(Object(o["a"])({},w),{},{downloadCost:parseInt(e.uptime/1e3),downloadPackageMd5:e.MD5,isSuccess:1})}),h.a.prototype.$sensors.track("pc_courseware_download",Object(o["a"])(Object(o["a"])({},w),{},{statusDesc:"success",downloadCost:parseInt(e.uptime/1e3),downloadPackageMd5:e.MD5||""}))},fail:function(e){console.log("课件下载失败:",e),p["a"].send({tag:"coursewareDownload",content:Object(o["a"])(Object(o["a"])({},w),{},{downloadCost:parseInt(e.uptime/1e3),downloadPackageMd5:e.MD5||"",isSuccess:0})}),h.a.prototype.$sensors.track("pc_courseware_download",Object(o["a"])(Object(o["a"])({},w),{},{statusDesc:"fail",downloadCost:parseInt(e.uptime/1e3),downloadPackageMd5:e.MD5||""}))}}));case 31:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(i["a"])(Object(a["a"])().mark((function e(){var t,n,o,i,s,p,m,f,C,k,P,w,y;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(g){e.next=11;break}return e.next=3,Object(c["a"])().catch((function(e){v("接口报错:红包雨:",e)}));case 3:if(t=e.sent,n=t.code,o=t.data,i=void 0===o?{}:o,s=i.redbagrainPackage,0===+n){e.next=10;break}return e.abrupt("return");case 10:g=s;case 11:return e.next=13,r["nativeApi"].getClientInfo();case 13:return p=e.sent,m=p.CW_SERVER_ADDRESS,f=p.CW_WEBROOT,C=b(),k=Object(l["i"])(g.offlineZipPath),P=k.slice(0,k.lastIndexOf(".")),e.next=21,r["downloaderApi"].checkCourseware(k,g.offlineZipMd5,"".concat(C,"/").concat(f,"/").concat(P));case 21:return w=e.sent,h.a.prototype.$sensors.track("pc_courseware_address_source",{type:"红包雨游戏",source:w?"local":"online"}),y=!0,Object(d["existsSync"])(Object(u["join"])("".concat(C,"/").concat(f,"/").concat(P),"/redbagrainPackage/index.html"))||(y=!1,v("红包雨解压报错:不存在解压后文件")),console.log("checkRedPacket 红包雨游戏是否有本地地址",w,y,Object(u["join"])("".concat(C,"/").concat(f,"/").concat(P),"/redbagrainPackage/index.html")),e.abrupt("return",w&&y?"".concat(m).concat(P,"/redbagrainPackage/index.html"):g.onlinePath);case 27:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},e80a:function(e,t,n){"use strict";n("f168")},ebcc:function(e,t,n){e.exports=n.p+"static/media/get-coins.71310f30.mp3"},f168:function(e,t,n){},f5b3:function(e,t,n){e.exports=n.p+"static/media/coin-fly.46908c84.mp3"}}]);
//# sourceMappingURL=chunk-33b85116.69f1a042.js.map