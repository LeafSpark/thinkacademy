(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["NewAssignment"],{"22de":function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return m})),n.d(t,"f",(function(){return p}));var a=n("c7eb"),s=n("1da1"),r=n("dc21"),i=n("e39c"),o=function(){var e=Object(s["a"])(Object(a["a"])().mark((function e(t,n,s){var o,c,u;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=Object(i["h"])(),c=o.oversea,e.next=3,Object(r["a"])({url:n,params:s,apiDomain:c});case 3:return u=e.sent,e.abrupt("return",u);case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),c=function(){var e=Object(s["a"])(Object(a["a"])().mark((function e(t,n){var s,r;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s="/homework-api/student/neirongyun/jumpUrl",e.next=3,o(t,s,n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),u=function(){var e=Object(s["a"])(Object(a["a"])().mark((function e(t,n){var s,r;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s="/homework-api/student/sync",e.next=3,o(t,s,n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),l=function(){var e=Object(s["a"])(Object(a["a"])().mark((function e(t,n){var s,r;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s="/homework-api/student/paperDetail",e.next=3,o(t,s,n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=Object(s["a"])(Object(a["a"])().mark((function e(t,n){var s,r;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s="/homework-api/student/paperOverview",e.next=3,o(t,s,n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(s["a"])(Object(a["a"])().mark((function e(t,n){var s,r;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s="/beibo/student/paperOverview",e.next=3,o(t,s,n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=Object(s["a"])(Object(a["a"])().mark((function e(t,n){var s,r;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s="/api/beibo/student/watch",e.next=3,o(t,s,n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},2345:function(e,t,n){"use strict";n("9b3c")},"3ed8":function(e,t,n){"use strict";n("aa44")},"4a82":function(e,t,n){"use strict";n("7c49")},"7b1b":function(e,t,n){"use strict";n("14d9"),n("b64b"),n("99af");var a=n("d0db"),s=n("e39c"),r={data:{return:{isSendLogger:!1}},methods:{bindEvent:function(){window.addEventListener("message",this.bindMessage,!1)},bindMessage:function(e){var t=e.data||{};if(console.log("message",t),"string"===typeof t)try{t=JSON.parse(t)}catch(l){console.error(l),t=e.data}var n=t.action;if("jy-exit"==n&&(this.sendLoggers("h5message","退出作业事件:actionType: ".concat(n,", parseData: ").concat(JSON.stringify(t))),this.isBeforeClassTest()&&this.$router.push("".concat(this.backUrl))),"jy-submit"==n&&(this.sendLoggers("h5message","提交作业事件:actionType: ".concat(n,", parseData: ").concat(JSON.stringify(t),", sendMessageDone: ").concat(this.sendMessageDone)),this.sendMessageDone||this.submitHomeworkEvent(t.data.state||1,t.data.type||0)),"jy-overtime"==n&&(this.sendLoggers("h5message","请求超时事件:actionType: ".concat(n,", parseData: ").concat(JSON.stringify(t))),this.isBeforeClassTest()&&this.$router.push("".concat(this.backUrl)),this.$Message.warning("Network error (or your account is signed in on another device)")),"jy-close"==n&&(this.sendLoggers("h5message","退出h5页面事件:actionType: ".concat(n,", parseData: ").concat(JSON.stringify(t))),this.isBeforeClassTest()&&this.$router.push("".concat(this.backUrl))),"hwApiResponse"==n){var a=Object(s["q"])("homeworkId"),r=Object(s["q"])("classId"),i={homeworkId:a,homeworkClassId:r,homeworkApiPath:t.data.path,homeworkResponseTime:t.data.responseTime,homeworkStatus:t.data.status};this.sendLoggers("h5message","提交作业接口响应时长:actionType: ".concat(n,", parseData: ").concat(JSON.stringify(t),",homeworkSubmit:").concat(JSON.stringify(i)))}if("hwUploadImg"==n){var o=Object(s["q"])("homeworkId"),c=Object(s["q"])("classId"),u={homeworkId:o,homeworkClassId:c,homeworkUploadDuration:t.data.uploadDuration,homeworkType:t.data.uploadType,homeworkUploadStatus:t.data.uploadStatus};this.sendLoggers("h5message","上传图片上传时长:actionType: ".concat(n,", parseData: ").concat(JSON.stringify(t),",homeworkUpload:").concat(JSON.stringify(u)))}"completedExamSuccess"==n&&(this.sendSubmitEaxmToTeacher(),this.sendLoggers("h5message","监听h5交卷事件:actionType: ".concat(n,", parseData: ").concat(JSON.stringify(t)))),"dismissView"!=n&&"hwHomeWorkRepeat"!==n||(this.showEaxmIframe=!1,this.examUrl="",this.sendLoggers("h5message","监听h5关闭事件:actionType: ".concat(n,", parseData: ").concat(JSON.stringify(t))))},sendLoggers:function(e,t){this.isSendLogger=!0,a["a"].send({tag:e,level:"info",content:{msg:t}})},isBeforeClassTest:function(){return!!this.$router}},beforeDestroy:function(){window.removeEventListener("message",this.bindMessage)}};t["a"]=r},"7c49":function(e,t,n){},"857a":function(e,t,n){"use strict";var a=n("e330"),s=n("1d80"),r=n("577e"),i=/"/g,o=a("".replace);e.exports=function(e,t,n,a){var c=r(s(e)),u="<"+t;return""!==n&&(u+=" "+n+'="'+o(r(a),i,"&quot;")+'"'),u+">"+c+"</"+t+">"}},"9b3c":function(e,t,n){},aa44:function(e,t,n){},af03:function(e,t,n){"use strict";var a=n("d039");e.exports=function(e){return a((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},c7cd:function(e,t,n){"use strict";var a=n("23e7"),s=n("857a"),r=n("af03");a({target:"String",proto:!0,forced:r("fixed")},{fixed:function(){return s(this,"tt","","")}})},d023:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-wrapper"},[t("Toolbar"),t("div",{staticClass:"assignment"},[t("iframe",{staticClass:"iframe",attrs:{id:"assignment",src:e.assignmentUrl},on:{onload:e.handleIframeLoad}})]),e.visibleBigImage&&e.showCoinModals?t("div",{staticClass:"tips"},[t("a-modal",{attrs:{width:420,closable:!1,maskClosable:!1,footer:null},model:{value:e.visibleBigImage,callback:function(t){e.visibleBigImage=t},expression:"visibleBigImage"}},[t("div",{staticClass:"content"},[t("span",{staticClass:"label"},[t("img",{attrs:{src:n("ff93"),alt:""}})]),t("span",{staticClass:"text"},[e._v(" "+e._s(e.$t("courses.assignment.earnedNotice"))+" "),t("label",[e._v(e._s(e.coins.submitCoin)+" "),e.coins.earlySubmitCoin?t("span",[e._v("+"+e._s(e.coins.earlySubmitCoin))]):e._e()]),e._v(e._s(e.$t("common.coins")))]),e.coins.earlySubmitCoin?t("span",{staticClass:"sub-text"},[e._v(" "+e._s(e.$t("courses.assignment.submissionNotice"))+" "),t("label",[e._v(e._s(e.coins.earlySubmitCoin))]),e._v(" "+e._s(e.$t("common.coins"))+" ")]):e._e(),t("a-button",{directives:[{name:"log",rawName:"v-log"}],class:[e.buttonClass],attrs:{type:"primary",shape:"round",size:"large",loading:e.loading,"data-log":"知道了"},on:{click:function(t){return t.stopPropagation(),e.handleClose.apply(null,arguments)}}},[e._v(" "+e._s(e.$t("common.gotIt"))+" ")])],1)])],1):e._e()],1)},s=[],r=n("c7eb"),i=n("1da1"),o=n("dfa8"),c=n("22de"),u=n("92e5"),l=n("7b1b"),d=n("d0db"),m={name:"Homework",mixins:[l["a"]],components:{Toolbar:o["a"]},data:function(){return{backUrl:"",assignmentUrl:"",visibleBigImage:!1,sendMessageDone:!1,showCoinModals:!1,uid:0,coins:{earlySubmitCoin:0,submitCoin:0}}},mounted:function(){var e=this;return Object(i["a"])(Object(r["a"])().mark((function t(){var n;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.initRouteParams(),e.bindEvent(),t.next=4,Object(u["a"])();case 4:n=t.sent,e.uid=n.uid;case 6:case"end":return t.stop()}}),t)})))()},methods:{handleIframeLoad:function(){console.info("对象函数 handleIframeLoad,filePath:renderer/views/h5/NewAssignment.vue"),d["a"].send({content:{msg:"加载H5成功-新作业",assignmentUrl:this.assignmentUrl}})},submitHomeworkEvent:function(e,t){var n=this;console.info("对象函数 submitHomeworkEvent(state, type)",e,t,"filePath:renderer/views/h5/NewAssignment.vue"),this.sendMessageDone=!0;var a=this.$route.query,s=a.planId,r=a.classId,i=a.homeworkId;Object(c["e"])(this,{planId:s,classId:r,homeworkStatus:e,homeworkId:i,homeworkType:0,type:t}).then((function(e){console.info("箭头函数 sendSubmitMessage的then(res)",e,"filePath:renderer/views/h5/NewAssignment.vue"),n.visibleBigImage=!0,n.coins={earlySubmitCoin:e.data.earlySubmitCoin,submitCoin:e.data.submitCoin},n.showCoinModals=e.data.isShow,console.log(e,"res")}))},initRouteParams:function(){console.info("对象函数 initRouteParams,filePath:renderer/views/h5/NewAssignment.vue");var e=this.$route.query;this.assignmentUrl=e.assignmentUrl,window.thinkApi.ipc.send("test:url",this.assignmentUrl),console.log(e),this.backUrl=e.backUrl+"&isNeedBackToCurrentTap=true&planId=".concat(this.$route.query.planId)},handleClose:function(){console.info("对象函数 handleClose,filePath:renderer/views/h5/NewAssignment.vue"),this.visibleBigImage=!1}}},p=m,h=(n("2345"),n("2877")),f=Object(h["a"])(p,a,s,!1,null,"110147d2",null);t["default"]=f.exports},dfa8:function(e,t,n){"use strict";n("c7cd");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"toolbar",class:[{transparent:e.transparent,fixed:e.fixed,"white-button":e.whiteButton,"theme-dark":e.darkTheme}],attrs:{"data-log":"原生菜单栏"}},[t("div",{staticClass:"drag-bar",attrs:{"data-log":"drag-bar"}}),t("WindowsActionBar")],1)},s=[],r=function(){var e=this,t=e._self._c;return"win"===e.platform?t("div",{staticClass:"windows-action-bar",attrs:{"data-log":"window菜单栏"}},[t("div",{staticClass:"item",attrs:{"data-log":"最小化"},on:{click:e.handleMinimizeWindow}},[t("span",{staticClass:"icon icon-minimize"})]),t("div",{staticClass:"item",attrs:{"data-log":"关闭"},on:{click:e.handleCloseWindow}},[t("span",{staticClass:"icon icon-close"})])]):e._e()},i=[],o=n("0d52"),c=n("e39c"),u={name:"WindowsActionBar",data:function(){return{platform:Object(c["l"])()}},methods:{handleMinimizeWindow:function(){console.info("对象函数 handleMinimizeWindow,filePath:renderer/components/Common/windowsActionBar.vue"),o["nativeApi"].minimizeWindow()},handleCloseWindow:function(){console.info("对象函数 handleCloseWindow,filePath:renderer/components/Common/windowsActionBar.vue"),localStorage.removeItem("largeClassTestCoverage"),localStorage.removeItem("smallClassTestCoverage"),o["nativeApi"].closeWindow(!0)}}},l=u,d=(n("4a82"),n("2877")),m=Object(d["a"])(l,r,i,!1,null,"55cdfd22",null),p=m.exports,h={name:"Toolbar",components:{WindowsActionBar:p},props:{transparent:{default:!1,type:Boolean},fixed:{default:!1,type:Boolean},whiteButton:{default:!1,type:Boolean},disabledMaximize:{default:!1,type:Boolean},darkTheme:{default:!1,type:Boolean}}},f=h,g=(n("3ed8"),Object(d["a"])(f,a,s,!1,null,"3bd2c296",null));t["a"]=g.exports},ff93:function(e,t,n){e.exports=n.p+"static/img/label.c5749d71.png"}}]);
//# sourceMappingURL=NewAssignment.6152b717.js.map